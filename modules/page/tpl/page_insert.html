<!--%import("filter/insert_outside.xml")-->
<include target="header.html" />
<div cond="$XE_VALIDATOR_MESSAGE" class="message {$XE_VALIDATOR_MESSAGE_TYPE}">
	<p>{$XE_VALIDATOR_MESSAGE}</p>
</div>

<section class="section">
<form ruleset="insertPage" action="./" method="post" enctype="multipart/form-data" class="x_form-horizontal">
	<input type="hidden" name="module" value="page" />
	<input type="hidden" name="act" value="procPageAdminInsert" />
	<input type="hidden" name="page" value="{$page}" />
	<input type="hidden" name="module_srl" value="{$module_srl}" />

	<div class="x_control-group" cond="!$module_srl">
		<label class="x_control-label" for="page_type">{$lang->page_type}</label>
		<div class="x_controls">
			<select name="page_type" id="page_type">
				<option value="">{$lang->click_choice}</option>
				<option value="WIDGET">{$lang->page_type_name['WIDGET']}</option>
				<option value="ARTICLE">{$lang->page_type_name['ARTICLE']}</option>
				<option value="OUTSIDE">{$lang->page_type_name['OUTSIDE']}</option>
			</select>
			<a href="#aboutPageType" data-toggle class="x_icon-question-sign">{$lang->help}</a>
			<div class="x_help-block" id="aboutPageType" hidden>{$lang->about_page_type}</div>
		</div>
	</div>
	<input type="hidden" name="page_name" value="{$module_info->mid}" cond="$logged_info->is_admin !='Y'" />
	<div class="x_control-group" cond="$logged_info->is_admin =='Y'">
		<label class="x_control-label" for="page_name">{$lang->mid}</label>
		<div class="x_controls">
			<input type="text" name="page_name" id="page_name" value="{$module_info->mid}" />
			<a href="#aboutMid" data-toggle class="x_icon-question-sign">{$lang->help}</a>
			<p class="x_help-block" id="aboutMid" hidden>{$lang->about_mid}</p>
		</div>
	</div>
	<div class="x_control-group">
		<label class="x_control-label" for="module_category_srl">{$lang->module_category}</label>
		<div class="x_controls">
			<select name="module_category_srl" id="module_category_srl">
				<option value="0">{$lang->notuse}</option>
				<option loop="$module_category => $key, $val" value="{$key}" selected="selected"|cond="$module_info->module_category_srl==$key">{$val->title}</option>
			</select>
			<a href="#aboutCategory" data-toggle class="x_icon-question-sign">{$lang->help}</a>
			<p class="x_help-block" id="aboutCategory" hidden>{$lang->about_module_category}</p>
		</div>
	</div>
	<div class="x_control-group">
		<label class="x_control-label" for="lang_browser_title">{$lang->browser_title}</label>
		<div class="x_controls">
			<input type="text" name="browser_title" id="browser_title" value="{$module_info->browser_title}"  class="lang_code"/>
			<a href="#aboutBrowserTitle" data-toggle class="x_icon-question-sign">{$lang->help}</a>
			<p class="x_help-block" id="aboutBrowserTitle" hidden>{$lang->about_browser_title}</p>
		</div>
	</div>
	<div class="x_control-group">
		<label class="x_control-label" for="layout_srl">{$lang->layout}</label>
		<div class="x_controls">
			<select name="layout_srl" id="layout_srl">
				<option value="0">{$lang->notuse}</option>
				<option loop="$layout_list => $key, $val" value="{$val->layout_srl}" selected="selected"|cond="$module_info->layout_srl==$val->layout_srl">{$val->title} ({$val->layout})</option>
			</select>
			<a href="#aboutLayout" data-toggle class="x_icon-question-sign">{$lang->help}</a>
			<p class="x_help-block" id="aboutLayout" hidden>{$lang->about_layout}</p>
		</div>
	</div>
	<div class="x_control-group">
		<label class="x_control-label">{$lang->mobile_view}</label>
		<div class="x_controls">
			<label for="use_mobile">
				<input type="checkbox" name="use_mobile" id="use_mobile" value="Y" checked="checked"|cond="$module_info->use_mobile == 'Y'" />
				{$lang->about_mobile_view}
			</label>
		</div>
	</div>
	<div class="x_control-group">
		<label class="x_control-label" for="mlayout_srl">{$lang->mobile_layout}</label>
		<div class="x_controls">
			<select name="mlayout_srl" id="mlayout_srl">
				<option value="0">{$lang->notuse}</option>
				<option loop="$mlayout_list => $key, $val" value="{$val->layout_srl}" selected="selected"|cond="$module_info->mlayout_srl==$val->layout_srl">{$val->title} ({$val->layout})</option>
			</select>
			<a href="#aboutMobileLayout" data-toggle class="x_icon-question-sign">{$lang->help}</a>
			<p class="x_help-block" id="aboutMobileLayout" hidden>{$lang->about_layout}</p>
		</div>
	</div>
	<div class="x_control-group optionnalData widgetType outsideType">
		<label class="x_control-label" for="page_caching_interval">{$lang->page_caching_interval}</label>
		<div class="x_controls">
			<input type="text" name="page_caching_interval" id="page_caching_interval" value="{(int)$module_info->caching_interval}"  /> {$lang->unit_min}
			<a href="#aboutCaching" data-toggle class="x_icon-question-sign">{$lang->help}</a>
			<p class="x_help-block" id="aboutCaching" hidden>{$lang->about_page_caching_interval}</p>
		</div>
	</div>
	<div class="x_control-group optionnalData articleType">
		<label class="x_control-label">{$lang->skin_fix}</label>
		<div class="x_controls">
			<label for="is_skin_fix">
				<input type="checkbox" name="is_skin_fix" id="is_skin_fix" value="Y" /> 
				{$lang->about_skin_fix}
			</label>
		</div>
	</div>
	<div class="x_control-group optionnalData articleType">
		<label class="x_control-label" for="skin">{$lang->skin}</label>
		<div class="x_controls">
			<select name="skin" id="skin">
				<option loop="$skin_list => $key, $val" value="{$key}" selected="selected"|cond="$module_info->skin==$key ||(!$module_info->skin && $key=='default')">{$val->title}</option>
			</select>
			<a href="#aboutSkin" data-toggle class="x_icon-question-sign">{$lang->help}</a>
			<p class="x_help-block" id="aboutSkin" hidden>{$lang->about_skin}</p>
		</div>
	</div>
	<div class="x_control-group optionnalData articleType">
		<label class="x_control-label" for="mskin">{$lang->mobile_skin}</label>
		<div class="x_controls">
			<select name="mskin" id="mskin">
				<option loop="$mskin_list => $key, $val" value="{$key}" selected="selected"|cond="$module_info->mskin==$key ||(!$module_info->mskin && $key=='default')">{$val->title}</option>
			</select>
			<a href="#aboutMobileSkin" data-toggle class="x_icon-question-sign">{$lang->help}</a>
			<p class="x_help-block" id="aboutMobileSkin" hidden>{$lang->about_skin}</p>
		</div>
	</div>
	<div class="x_control-group row optionnalData outsideType">
		<label class="x_control-label" for="path">{$lang->opage_path}</label>
		<div class="x_controls">
			<input type="text" name="path" id="path" value="{htmlspecialchars($module_info->path)}"  />
			<a href="#aboutOpage" data-toggle class="x_icon-question-sign">{$lang->help}</a>
			<p class="x_help-block" id="aboutOpage" hidden>{$lang->about_opage_path} <mark>{realpath("./")}</mark></p>
		</div>
	</div>
	<div class="x_control-group row optionnalData outsideType">
		<label class="x_control-label" for="mpath">{$lang->opage_mobile_path}</label>
		<div class="x_controls">
			<input type="text" name="mpath" id="mpath" value="{htmlspecialchars($module_info->mpath)}"  />
			<a href="#aboutOpageMobile" data-toggle class="x_icon-question-sign">{$lang->help}</a>
			<p class="x_help-block" id="aboutOpageMobile" hidden>{$lang->about_opage_mobile_path} <mark>{realpath("./")}</mark></p>
		</div>
	</div>
	<div class="x_clearfix btnArea">
		<button class="x_btn x_btn-primary" type="submit">{$lang->cmd_make}</button>
	</div>
	</form>
</section>
<script>
(function($){
	$('.optionnalData').hide();
	$('select[name=page_type]').change(function(){
		$('.optionnalData').hide();
		var select = $('select[name=page_type] :selected').val();
		if(select != ""){
			$('.'+select.toLowerCase()+'Type').show();
		}
	});
 })(jQuery);
</script>
