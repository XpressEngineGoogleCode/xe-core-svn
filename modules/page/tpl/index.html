<load target="js/page_admin.js" usecdn="true" />
<!--#include("header.html")-->

<div id="content" class="cleared">
    <div class="xe-ui-panel cleared">
        <div class="xe-ui-panel-content cleared">
            <!--@if($module_info)-->
            <!--@if($module_info->mid)-->
            <h2>
                {$module_info->mid}<block cond="$module_info->is_default=='Y'">({$lang->is_default})</block>
                |
                <a href="{getSiteUrl($module_info->domain,'','mid',$module_info->mid)}">{$lang->view}</a>
            </h2>
            <!--@end-->
            <div class="cnb">
                <ul>
                    <!--@if($module_srl)-->
                    <li <!--@if($act=='dispPageAdminInfo')-->class="active"<!--@end-->><a href="{getUrl('act','dispPageAdminInfo')}">{$lang->module_info}</a></li>
                    <li <!--@if($act=='dispPageAdminPageAdditionSetup')-->class="active"<!--@end-->><a href="{getUrl('act','dispPageAdminPageAdditionSetup')}">{$lang->cmd_addition_setup}</a></li>
                    <li <!--@if($act=='dispPageAdminGrantInfo')-->class="active"<!--@end-->><a href="{getUrl('act','dispPageAdminGrantInfo')}">{$lang->cmd_manage_grant}</a></li>
                    <!--@end-->
                </ul>
            </div>
            <!--@end-->
            <p>{nl2br($lang->about_page)}</p>

            <!-- 목록 -->
            <form action="./" method="get" onsubmit="return doChangeCategory(this);" id="fo_list">
                <table width="100%" border="1" cellspacing="0" cellpadding="0" class="xe-ui-table">
                    <caption>
                        <p class="f-left">
                            <a href="{getUrl('act','dispPageAdminInsert','module_srl','')}" class="xe-ui-button-gray">{$lang->cmd_page_create}</a>
                        </p>
                        <p class="f-right">
                            <a href="{getUrl('','module','module','act','dispModuleAdminModuleSetup')}" onclick="doCartSetup(this.href); return false;" class="xe-ui-button-gray">{$lang->cmd_setup}</a>
                            <a href="{getUrl('','module','module','act','dispModuleAdminModuleGrantSetup')}" onclick="doCartSetup(this.href); return false;" class="xe-ui-button-gray">{$lang->cmd_manage_grant}</a>
                        </p>
                    </caption>
                    <thead>
                        <tr>
                            <th class="aLeft" scope="col">{$lang->mid}</th>
                            <th scope="col">
                                <input type="hidden" name="module" value="{$module}" />
                                <input type="hidden" name="act" value="{$act}" />
                                <select name="module_category_srl" class="xe-ui-panel-select" style="width:180px;">
                                    <option value="">{$lang->module_category}</option>
                                    <option value="0" <!--@if($module_category_srl==="0")-->selected="selected"<!--@end-->>{$lang->not_exists}</option>
                                    <!--@foreach($module_category as $key => $val)-->
                                    <option value="{$key}" <!--@if($module_category_srl==$key)-->selected="selected"<!--@end-->>{$val->title}</option>
                                    <!--@end-->
                                    <option value="">---------</option>
                                    <option value="-1">{$lang->cmd_management}</option>
                                </select>
                                <a href="#" onclick="jQuery('#fo_list').submit();return false;" class="xe-ui-button-gray">GO</a>
                            </th>
                            <th scope="col">{$lang->page_type}</th>
                            <th scope="col">{$lang->cmd_view}</th>
                            <th scope="col">{$lang->cmd_setup}</th>
                            <th scope="col">{$lang->cmd_copy}</th>
                            <th scope="col">{$lang->cmd_delete}</th>
                            <th scope="col"><input type="checkbox" onclick="XE.checkboxToggleAll(); return false;" /></th>
                        </tr>
                    </thead>
                    <tbody>
                        <!--@foreach($page_list as $no => $val)-->
                        <tr class="row{$cycle_idx}">
                            <td>{$val->mid}</td>
                            <td class="center">
                                <!--@if(!$val->module_category_srl)-->
                                <!--@if($val->site_srl)-->
                                {$lang->virtual_site}
                                <!--@else-->
                                {$lang->not_exists}
                                <!--@end-->
                                <!--@else-->
                                {$module_category[$val->module_category_srl]->title}
                                <!--@end-->
                            </td>
                            <td class="center">{$val->page_type}</td>
                            <td class="center button">
                                <a class="xe-ui-button-gray" href="{getSiteUrl($val->domain,'','mid',$val->mid)}" target="_blank">{$lang->cmd_view}</a>
                            </td>
                            <td class="center button"><a class="xe-ui-button-gray" href="{getUrl('act','dispPageAdminInfo','module_srl',$val->module_srl)}">{$lang->cmd_setup}</a></td>
                            <td class="center button"><a class="xe-ui-button-gray" href="{getUrl('','module','module','act','dispModuleAdminCopyModule','module_srl',$val->module_srl)}" onclick="popopen(this.href);return false;">{$lang->cmd_copy}</a></td>
                            <td class="center button"><a class="xe-ui-button-gray" href="{getUrl('act','dispPageAdminDelete','module_srl', $val->module_srl)}">{$lang->cmd_delete}</a></td>
                            <td class="center button"><input type="checkbox" name="cart" value="{$val->module_srl}" /></td>
                        </tr>
                        <!--@end-->
                        </tbody>
                </table>
            </form>

            <!-- 검색 -->
            <form action="./" method="get" class="adminSearch">
                <input type="hidden" name="module" value="{$module}" />
                <input type="hidden" name="mid" value="{$mid}" />
                <input type="hidden" name="vid" value="{$vid}" />
                <input type="hidden" name="act" value="dispPageAdminContent" />
                <p class="inline-list center">
                    <label>{$lang->mid}</label>
                    <input type="text" name="s_mid" value="{htmlspecialchars($s_mid)}" class="xe-ui-panel-text"/>
                    <label>{$lang->browser_title}</label>
                    <input type="text" name="s_browser_title" value="{htmlspecialchars($s_browser_title)}" class="xe-ui-panel-text"/>
                    <a href="#" onclick="jQuery('.adminSearch').submit();return false;" class="xe-ui-button-gray">{$lang->cmd_search}</a>
                </p>
            </form>
        </div>
        <div class="xe-ui-panel-controller cleared">
            <hr />
            <form action="">
                <input type="hidden" name="error_return_url" value="" />
                <input type="hidden" name="module" value="{$module}" />
                <input type="hidden" name="act" value="{$act}" />
                <input cond="$search_keyword" type="hidden" name="search_keyword" value="{$search_keyword}" />
                <input cond="$search_target" type="hidden" name="search_target" value="{$search_target}" />

                <p style="text-align: center;">
                    <a href="{getUrl('page', '')}" class="xe-ui-button-gray pagination first"><img src="{getFullUrl()}common/img/pagination_left.png"/></a>
                    <block cond="$page_navigation->first_page + $page_navigation->page_count > $page_navigation->last_page && $page_navigation->page_count != $page_navigation->total_page">
                        {@$isGoTo = true}
                        <a href="{getUrl('page', '')}" class="xe-ui-button-gray pagination">1</a>
                        <a href="#goTo" class="tgAnchor" title="{$lang->cmd_go_to_page}">...</a>
                    </block>
                    <!--@while($page_no = $page_navigation->getNextPage())-->
                    {@$last_page = $page_no}
                    <a href="#" cond="$page_no == $page" class="xe-ui-button-gray pagination disabled">{$page_no}</a>
                    <a cond="$page_no != $page" href="{getUrl('page', $page_no)}" class="xe-ui-button-gray pagination">{$page_no}</a>
                    <!--@end-->
                    <block cond="$last_page != $page_navigation->last_page">
                        {@$isGoTo = true}
                        <a href="#goTo" class="tgAnchor" title="{$lang->cmd_go_to_page}">...</a>
                        <a href="{getUrl('page', $page_navigation->last_page)}" class="xe-ui-button-gray pagination">{$page_navigation->last_page}</a>
                    </block>
                    <a href="{getUrl('page', $page_navigation->last_page)}" class="xe-ui-button-gray pagination last"><img src="{getFullUrl()}common/img/pagination_right.png"/></a>
                            <span cond="$isGoTo" id="goTo" class="tgContent">
                                <input name="page" title="{$lang->cmd_go_to_page}" />
                                <button type="submit">Go</button>
                            </span>
                </p>
            </form>
        </div>
    </div>
</div>
