<load target="./js/config.js" usecdn="true" />
<load target="../install/lang/lang.xml" usecdn="true" />
<load target="../../session/tpl/js/session.js" usecdn="true" />
<div cond="$XE_VALIDATOR_MESSAGE" class="message {$XE_VALIDATOR_MESSAGE_TYPE}">
	<p>{$XE_VALIDATOR_MESSAGE}</p>
</div>
<div class="x_page-header">
	<h1>{$lang->menu_gnb_sub['adminConfigurationGeneral']}</h1>
</div>
<section class="section">
	<h1>{$lang->subtitle_primary}</h1>
	<form action="./" method="post" enctype="multipart/form-data" class="x_form-horizontal">
		<input type="hidden" name="module" value="install" />
		<input type="hidden" name="act" value="procInstallAdminConfig" />

		<div class="x_control-group">
			<label class="x_control-label" for="_target_module">{$lang->start_module}</label>
			<div class="x_controls">
				<input class="module_search" type="text" name="index_module_srl" value="{$start_module->index_module_srl}" />
				{$lang->about_start_module}
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label">{$lang->lang_select}</label>
			<div class="x_controls">
				<label for="lang_{$key}" class="x_inline" loop="$langs=>$key,$val">
					<input type="checkbox" name="selected_lang[]" id="lang_{$key}" value="{$key}" disabled="disabled"|cond="$key==$selected_lang" checked="checked"|cond="isset($lang_selected[$key])" />{$val}
					<!--@if($key==$selected_lang)-->
					<input type="hidden" name="selected_lang[]" id="lang_{$key}" value="{$key}" />
					<!--@end-->
				</label>
			</div>
		</div>
		<div class="x_control-group">
			<label for="change_lang_type" class="x_control-label">{$lang->default_lang}</label>
			<div class="x_controls">
				<select name="change_lang_type" id="change_lang_type">
					<option value="{$key}" selected="selected"|cond="$key==$selected_lang" loop="$lang_supported=>$key,$val">{$val}</option>
				</select>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label" for="time_zone">{$lang->timezone}</label>
			<div class="x_controls">
				<select name="time_zone" id="time_zone">
					<option value="{$key}" selected="selected"|cond="$time_zone==$key" loop="$time_zone_list=>$key,$val">{$val}</option>
				</select>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label">{$lang->use_mobile_view}</label>
			<div class="x_controls">
				<label for="use_mobile_view_y" class="x_inline">
					<input type="radio" name="use_mobile_view" id="use_mobile_view_y" value="Y" checked="checked"|cond="$use_mobile_view == 'Y'" />{$lang->cmd_yes}
				</label>
				<label for="use_mobile_view_n" class="x_inline">
					<input type="radio" name="use_mobile_view" id="use_mobile_view_n" value="N" checked="checked"|cond="$use_mobile_view != 'Y'" />{$lang->cmd_no}
				</label>
				<span class="x_help-block">{$lang->about_use_mobile_view}</span>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label">{$lang->thumbnail_type}</label>
			<div class="x_controls">
				<label for="thumbnail_type_crop" class="x_inline">
					<input type="radio" name="thumbnail_type" id="thumbnail_type_crop" value="corp" checked="checked"|cond="$thumbnail_type != 'ratio'" />{$lang->corp}
				</label>
				<label for="thumbnail_type_ratio" class="x_inline">
					<input type="radio" name="thumbnail_type" id="thumbnail_type_ratio" value="ratio" checked="checked"|cond="$thumbnail_type == 'ratio'" />{$lang->ratio}
				</label>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label" for="htmlFooter">{$lang->input_footer_script}</label>
			<div class="x_controls">
				<textarea name="htmlFooter" id="htmlFooter" rows="8" cols="42">{$htmlFooter}</textarea>
				<span class="x_help-block">{$lang->detail_input_footer_script}</span>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label">{$lang->allow_use_favicon}</label>
			<div class="x_controls">
				<p id="faviconPreview">
					<img src="{$favicon_url}" alt="favicon" width="16" height="16" class="fn1">
					<img src="{$favicon_url}" alt="favicon Image" width="16" height="16" class="fn2">
				</p>
				<a href="javascript:deleteIcon('favicon\.ico');">{$lang->cmd_delete}</a>
				<input type="file" name="favicon" id="favicon" title="favicon" />
				<span class="x_help-block">{$lang->about_use_favicon}</span>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label">{$lang->allow_use_mobile_icon}</label>
			<div class="x_controls">
				<p id="mobiconPreview">
					<img src="{$mobicon_url}" alt="Mobile Home Icon" width="32" height="32" />
					<span>www</span>
				</p>
				<a href="javascript:deleteIcon('mobicon\.png');">{$lang->cmd_delete}</a>
				<input type="file" name="mobicon" id="mobicon" title="Mobile Home Icon"/>
				<span class="x_help-block">{$lang->detail_use_mobile_icon}</span>
			</div>
		</div>
		<div class="x_clearfix btnArea">
			<div class="x_pull-right">
				<button type="submit" class="x_btn x_btn-primary">{$lang->cmd_save}</button>
			</div>
		</div>
	</form>
</section>
<section class="section">
	<h1>{$lang->subtitle_advanced}</h1>
	<form action="./" method="post" enctype="multipart/form-data" class="x_form-horizontal">
		<input type="hidden" name="module" value="install" />
		<input type="hidden" name="act" value="procInstallAdminSaveTimeZone" />

		<div class="x_control-group">
			<label class="x_control-label" for="admin_ip_list">{$lang->admin_ip_limit}</label>
			<div class="x_controls">
				<textarea name="admin_ip_list" id="admin_ip_list" rows="8" cols="42">{$admin_ip_list}</textarea>
				{$lang->local_ip_address} : {$IP}</p>
				<span class="x_help-block">
					{$lang->about_admin_ip_limit}
				</span>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label" for="default_url">{$lang->default_url}</label>
			<div class="x_controls">
				<input type="text" name="default_url" id="default_url" value="{$default_url}"/>
				<span class="x_help-block">
					{$lang->about_default_url}
				</span>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label">{$lang->use_ssl}</label>
			<div class="x_controls">
				<!--@foreach($lang->ssl_options as $key => $val)-->
				<label for="ssl_{$key}" class="x_inline"><input type="radio" name="use_ssl" id="ssl_{$key}" value="{$key}" <!--@if($use_ssl==$key)-->checked="checked" <!--@end-->/> {$val}</label>
				<!--@endforeach-->
				<span class="x_help-block">{$lang->about_use_ssl}</span>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label">{$lang->server_ports}</label>
			<div class="x_controls">
				<label for="http_port" class="x_inline">HTTP: <input type="text" name="http_port" id="http_port" size="5" value="{$http_port}" style="width:40px" /></label>
				<label for="https_port" class="x_inline">HTTPS: <input type="text" name="https_port" id="https_port" size="5" value="{$https_port}" style="width:40px" /></label>
			</div>
		</div>
		<div class="x_control-group" cond="__XE_CDN_VERSION__!='%__XE_CDN_VERSION__%'">
			<label class="x_control-label">{$lang->use_cdn}</label>
			<div class="x_controls">
				<label for="cdn_y" class="x_inline"><input type="radio" name="use_cdn" id="cdn_y" value="Y" checked="checked"|cond="$use_cdn=='Y'" /> {$lang->cmd_yes}</label>
				<label for="cdn_n" class="x_inline"><input type="radio" name="use_cdn" id="cdn_n" value="N" checked="checked"|cond="$use_cdn!='Y'" /> {$lang->cmd_no}</label>
				<span class="x_help-block">{$lang->about_cdn}</span>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label">{$lang->use_rewrite}</label>
			<div class="x_controls">
				<label for="use_rewrite_y" class="x_inline"><input type="radio" name="use_rewrite" id="use_rewrite_y" value="Y" checked="checked"|cond="$use_rewrite == 'Y'" /> {$lang->cmd_yes}</label>
				<label for="use_rewrite_n" class="x_inline"><input type="radio" name="use_rewrite" id="use_rewrite_n" value="N" checked="checked"|cond="$use_rewrite != 'Y'" /> {$lang->cmd_no}</label>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label">{$lang->use_sso}</label>
			<div class="x_controls">
				<label for="sso_y" class="x_inline"><input type="radio" name="use_sso" id="sso_y" value="Y" checked="checked"|cond="$use_sso=='Y'" /> {$lang->cmd_yes}</label>
				<label for="sso_n" class="x_inline"><input type="radio" name="use_sso" id="sso_n" value="N" checked="checked"|cond="$use_sso!='Y'" /> {$lang->cmd_no}</label>
				<span class="x_help-block">{$lang->about_use_sso}</span>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label">{$lang->use_db_session}</label>
			<div class="x_controls">
				<label for="use_db_session_y" class="x_inline"><input type="radio" name="use_db_session" id="use_db_session_y" value="Y" checked="checked"|cond="$use_db_session=='Y'" /> {$lang->cmd_yes}</label>
				<label for="use_db_session_n" class="x_inline"><input type="radio" name="use_db_session" id="use_db_session_n" value="N" checked="checked"|cond="$use_db_session!='Y'" /> {$lang->cmd_no}</label>
				<span class="x_help-block">{$lang->about_db_session}</span>
			</div>
		</div>
		<div class="x_control-group">
			<label class="x_control-label">{$lang->qmail_compatibility}</label>
			<div class="x_controls">
				<label for="qmail_compatibility_y" class="x_inline"><input type="radio" name="qmail_compatibility" id="qmail_compatibility_y" value="Y" checked="checked"|cond="$qmail_compatibility=='Y'" /> {$lang->cmd_yes}</label>
				<label for="qmail_compatibility_n" class="x_inline"><input type="radio" name="qmail_compatibility" id="qmail_compatibility_n" value="N" checked="checked"|cond="$qmail_compatibility!='Y'" /> {$lang->cmd_no}</label>
				<span class="x_help-block">{$lang->about_qmail_compatibility}</span>
			</div>
		</div>
		<div class="x_clearfix btnArea">
			<div class="x_pull-right">
				<button type="submit" class="x_btn x_btn-primary">{$lang->cmd_save}</button>
			</div>
		</div>
	</form>
</section>
<script>
jQuery(function($){
	$('#favicon').change(function(){
		var re_favicon = /[^.]+\.ico$/
		if(re_favicon.test($(this).val()) != true){
			alert('*.ico {$lang->msg_possible_only_file}');
			return false;
		}
	});
	$('#mobicon').change(function(){
		var re_favicon = /[^.]+\.png$/
		if(re_favicon.test($(this).val()) != true){
			alert('*.png {$lang->msg_possible_only_file}');
			return false;
		}
	});
});
</script>

