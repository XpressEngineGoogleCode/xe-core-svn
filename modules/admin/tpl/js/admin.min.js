function doInstallModule(a){var b=new Array();b.module_name=a;exec_xml("install","procInstallAdminInstall",b,completeInstallModule);}function doUpdateModule(a){var b=new Array();b.module_name=a;exec_xml("install","procInstallAdminUpdate",b,completeInstallModule);}function completeInstallModule(a){alert(a.message);location.reload();}jQuery(function(b){window.scrollTo(0,0);b(".x .skipNav>a").click(function(){b(b(this).attr("href")).attr("tabindex","0").css("outline","0").focus();});b(document.body).on("click",".x [data-toggle]",function(){var h=b(this);if(h.is("a")&&h.attr("href")!=h.attr("data-toggle")){var g=h.attr("href");h.attr("data-toggle",g);}var f=b(h.attr("data-toggle"));var j="a,input,button,textarea,select";f.toggle();if(f.is(":visible")&&!f.find(j).length){f.not(":disabled").attr("tabindex","0").css("outline","0").focus();}else{if(f.is(":visible")&&f.find(j).length){f.not(":disabled").find(j).eq(0).focus();}else{h.focus();}}return false;});b(document.body).on("click",".x [data-show]",function(){var g=b(this);if(g.is("a")&&g.attr("href")!=g.attr("data-show")){var f=g.attr("href");g.attr("data-show",f);}b(g.attr("data-show")).show().attr("tabindex","0").focus();return false;});b(document.body).on("click",".x [data-hide]",function(){var g=b(this);if(g.is("a")&&g.attr("href")!=g.attr("data-hide")){var f=g.attr("href");g.attr("data-hide",f);}b(g.attr("data-hide")).hide();g.focus();return false;});b.fn.xeTabbable=function(){b(this).each(function(){var f=b(this);f.find(">.x_nav-tabs>li>a").each(function(g){b(this).attr("data-index",g+1);});f.find(">.x_tab-content>.x_tab-pane").each(function(g){b(this).attr("data-index",g+1);});});b('.x .x_tab-content>.x_tab-pane:not(".x_active")').hide();};b(".x .x_tabbable").xeTabbable();b(document.body).on("click",'.x .x_nav-tabs>li>a[href*="#"]',function(){var f=b(this);if(f.parent("li").hasClass("x_disabled")){return false;}f.parent("li").addClass("x_active").siblings().removeClass("x_active");f.closest(".x_nav-tabs").next(".x_tab-content").find(">.x_tab-pane").eq(f.attr("data-index")-1).addClass("x_active").show().siblings(".x_tab-pane").removeClass("x_active").hide();b(this).parents(".x_tabbable").trigger("tab_change",[parseInt(b(this).attr("data-index"))-1,b(this)]);return false;});function a(){var h=b(".x>.body");var g=h.find(">.gnb");var f=h.children("#content.content");f.width("99.99%");setTimeout(function(){f.removeAttr("style");if(g.height()>f.height()){f.height(g.height());}},100);}b.fn.gnb=function(){var m=b(".x>.body");var j=m.find(">.gnb");var l=j.find(">ul>li");var h=new Date();h.setTime(h.getTime()+60*60*24*356);l.find(">a").prepend("<i />");l.each(function(n){b(this).attr("data-index",n+1);});var k=l.find(">ul>li.active_").closest("li.active").attr("data-index");l.find(">ul>li.active_").clone().addClass("active").attr("data-index",k).prependTo("#gnbNav").find(">a").prepend("<i />");l.find(">a").click(function(){var p=b(this).parent("li");var r=p.hasClass("open");var o=p.hasClass("active");var n=p.find(">ul").length>=1;var q=m.hasClass("wide");function s(){m.removeClass("wide");a();}if(!r&&!o&&n){p.addClass("open").find(">ul").slideDown(100);s();return false;}else{if(r&&!o&&n&&!q){p.removeClass("open").find(">ul").slideUp(100);s();return false;}else{if(q&&!n||o||q&&r){s();return false;}}}});j.find('>a[href="#gnbNav"]').click(function(){b(this).parent(".gnb").toggleClass("open");m.toggleClass("wide");if(b(window).width()<=980&&!j.hasClass("open")){b("#gnbNav").removeClass("ex");}a();if(b(this).parent(".gnb").hasClass("open")){setCookie("__xe_admin_gnb_status","open",h);}else{setCookie("__xe_admin_gnb_status","close",h);}return false;});j.find(".exMenu>button").click(function(){b("#gnbNav").toggleClass("ex");a();if(b("#gnbNav").hasClass("ex")){setCookie("__xe_admin_gnb_ex_status","open",h);}else{setCookie("__xe_admin_gnb_ex_status","close",h);}});var f=getCookie("__xe_admin_gnb_status");if(f){setCookie("__xe_admin_gnb_status",f,h);}var g=getCookie("__xe_admin_gnb_ex_status");if(g){setCookie("__xe_admin_gnb_xe_status",g,h);}};b(".gnb").gnb();b(".x #lang").mouseleave(function(){b(this).hide();}).focusout(function(){var f=b(this);setTimeout(function(){if(!f.find("a:focus").length){f.mouseleave();}},500);});b('.x th>input[type="checkbox"]').change(function(){var g=b(this),f=g.data("name");g.closest("table").find("input:checkbox").filter(function(){var h=b(this);return !h.prop("disabled")&&((h.attr("name")==f)||(h.data("name")==f));}).prop("checked",g.prop("checked")).end().end().trigger("update.checkbox",[f,this.checked]);});b(document.body).on("click",".x .x_pagination .x_disabled, .x .x_pagination .x_active",function(){return false;});if(b(".section").length>1){var d=b(".x .section").find(">h1:first");d.append('<button type="button" class="snToggle x_icon-chevron-up">Toggle this section</button>');b(".x .section.collapse>h1>.snToggle").removeClass("x_icon-chevron-up").addClass("x_icon-chevron-down");d.find(">.snToggle").click(function(){var g=b(this);var f=g.closest(".section");if(!f.hasClass("collapse")){f.addClass("collapse");g.removeClass("x_icon-chevron-up").addClass("x_icon-chevron-down");}else{f.removeClass("collapse");g.removeClass("x_icon-chevron-down").addClass("x_icon-chevron-up");}a();});}var e=b(".x .x_alert");e.prepend('<button type="button" class="x_close">&times;</button>');e.children(".x_close").click(function(){b(this).parent(".x_alert").hide();});b(".x .x_btn").click(function(){if(b(this).hasClass("x_disabled")){return false;}});b.fn.vr=function(){this.each(function(){var f=b(this);if(f.text()=="|"){f.addClass("vr").filter(":first-child, :last-child").remove();}});};b(".x i").vr();b.fn.labelMaker=function(){this.each(function(h){h=h+1;var k=b(this);var g="input, textarea, select";var f=":radio, :checkbox";var l="[id]";var j="i"+h;if(k.next(g).filter(l).not(f).length){k.attr("for",k.next().attr("id"));}else{if(k.next(g).not(l).not(f).length){k.attr("for",j).next().attr("id",j);}else{if(k.prev(f).filter(l).length){k.attr("for",k.prev().attr("id"));}else{if(k.prev(f).not(l).length){k.attr("for",j).prev().attr("id",j);}else{if(k.children(g).filter(l).length){k.attr("for",k.children(g).filter(l).eq(0).attr("id"));}else{if(k.children(g).not(l).length){k.attr("for",j).children(g).not(l).eq(0).attr("id",j);}}}}}}});};b("label:not([for])").labelMaker();b.fn.checkToggle=function(){function f(){setTimeout(function(){b(":checked").parent("label").addClass("checked");b(':not(":checked")').parent("label").removeClass("checked");},0);}this.change(f);f();};b(":radio, :checkbox").checkToggle();b.fn.fileTypeOverlap=function(){this.each(function(){var f=b(this);f.wrap('<span class="fileBtn x_btn" />').before(f.attr("title"));});};b('input[type="file"].overlap').fileTypeOverlap();b.fn.xeMask=function(){this.each(function(){var f=b(this),h=f.text();var g=/^([\w\-\.]+?)@(([\w-]+\.)+[a-z]{2,})$/ig;if(g.test(h)){f.html(h.replace(/(@.+)$/,'<span class="ellipsis">...</span><span class="cover">$1</span>')).find(">.ellipsis").css({position:"absolute",zIndex:1}).hover(function(){b(this).next(".cover").mouseover();},function(){b(this).next(".cover").mouseout();}).end().find(">.cover").css({zIndex:2,opacity:0}).hover(function(){b(this).css("opacity",1).prev("span").css("visibility","hidden");},function(){b(this).css("opacity",0).prev("span").css("visibility","visible");}).end();}});};b(".masked").xeMask();b.fn.tableSpan=function(){this.each(function(){var g=b(this);var h=g.find(">thead>tr:eq(0)>th").length;var f=g.find(">tbody>tr:eq(0)>td:only-child");if(h!=f.attr("colspan")){f.attr("colspan",h).css("text-align","center");}});};b("table").tableSpan();});jQuery(function(a){var b=27;a.fn.xeModalWindow=function(){this.not(".xe-modal-window").addClass("xe-modal-window").each(function(){a(a(this).attr("href")).addClass("x").hide();}).click(function(){var g=a(this),d,f,e;d=a(g.attr("href"));if(d.data("state")=="showing"){g.trigger("close.mw");}else{g.trigger("open.mw");}return false;}).bind("open.mw",function(){var j=a(this),e,h,f,d,g;e=a(j.attr("href"));if(!e.parent("body").length){h=a('<button type="button" class="x_close">&times;</button>');h.click(function(){e.data("anchor").trigger("close.mw");});e.find("[data-hide]").click(function(){e.data("anchor").trigger("close.mw");});a("body").append('<div class="x_modal-backdrop"></div>').append(e);e.prepend(h);}e.data("anchor",j);d=a.Event("before-open.mw");j.trigger(d);if(d.isDefaultPrevented()){return false;}e=a(j.attr("href"));g=j.data("duration")||"fast";e.data("state","showing");function k(){j.trigger("after-open.mw");}a(document).bind("keydown.mw",function(l){if(l.which==b){j.trigger("close.mw");return false;}});e.fadeIn(g,k).find("button.x_close:first").focus().end().prev(".x_modal-backdrop").show();a("body").css("overflow","hidden");}).bind("close.mw",function(){var g=a(this),d,e,f;d=a.Event("before-close.mw");g.trigger(d);if(d.isDefaultPrevented()){return false;}e=a(g.attr("href"));f=g.data("duration")||"fast";e.data("state","hiding");function h(){g.trigger("after-close.mw");}e.fadeOut(f,h).prev(".x_modal-backdrop").hide();a("body").css("overflow","auto");g.focus();});a("div.x_modal").addClass("x").hide();};a("a.modalAnchor").xeModalWindow();});jQuery(function(b){var a=false;var d=27;b.fn.xeContentToggler=function(){this.not(".xe-content-toggler").addClass("xe-content-toggler").each(function(){var e=b(this);$layer=b(e.attr("href"));$layer.hide().not(".xe-toggling-content").addClass("xe-toggling-content").mousedown(function(f){a=true;}).focusout(function(f){setTimeout(function(){if(!a&&!$layer.find(":focus").length&&$layer.data("state")=="showing"){e.trigger("close.tc");}a=false;},1);});}).click(function(){var f=b(this),e;e=b(f.attr("href"));e.data("anchor",f);if(e.data("state")=="showing"){f.trigger("close.tc");}else{f.trigger("open.tc");}return false;}).bind("open.tc",function(){var j=b(this),f,g,h;f=b(j.attr("href"));g=j.data("effect");h=j.data("duration")||"fast";f.data("state","showing");j.trigger("before-open.tc");a=false;b(document).unbind("mousedown.tc keydown.tc").bind("mousedown.tc keydown.tc",function(l){if(l){if(l.type=="keydown"&&l.which!=d){return true;}if(l.type=="mousedown"){var m=b(l.target);if(m.is("html,.tgAnchor,.tgContent")||f.has(m).length){return true;}}}j.trigger("close.tc");return false;});function k(){j.trigger("after-open.tc");}switch(g){case"slide":f.slideDown(h,k);break;case"slide-h":var e=f.css({"overflow-x":"",width:""}).width();f.show().css({"overflow-x":"hidden",width:"0px"}).animate({width:e},h,function(){f.css({"overflow-x":"",width:""});k();});break;case"fade":f.fadeIn(h,k);break;default:f.show();j.trigger("after-open.tc");}}).bind("close.tc",function(){var h=b(this),e,f,g;b(document).unbind("mousedown.tc keydown.tc");e=b(h.attr("href"));f=h.data("effect");g=h.data("duration")||"fast";e.data("state","hiding");h.trigger("before-close.tc");function j(){h.trigger("after-close.tc");}switch(f){case"slide":e.slideUp(g,j);break;case"slide-h":e.animate({width:0},g,function(){e.hide();j();});break;case"fade":e.fadeOut(g,j);break;default:e.hide();h.trigger("after-close.tc");}});return this;};b("a.tgAnchor").xeContentToggler();});jQuery(function(a){a.fn.xeModuleFinder=function(){this.not(".xe-module-finder").addClass("xe-module-finder").find("a.tgAnchor.findsite").bind("before-open.tc",function(){var d,b,e;d=a(this);b=a(d.attr("href")).find(">ul");e=d.prev("input:text").val();function f(j){var l,h=j.site_list,g,k;b.empty();d.closest(".modulefinder").find(".moduleList,.moduleIdList").attr("disabled","disabled");if(j.error||!a.isArray(h)){d.trigger("close.tc");return;}for(g=0,k=h.length;g<k;g++){l=a("<li />").appendTo(b);a('<button type="button" />').text(h[g].domain).data("site_srl",h[g].site_srl).appendTo(l);}}a.exec_json("admin.getSiteAllList",{domain:e},f);}).end().find(".tgContent.suggestion").delegate("button","click",function(){var d,b;d=a(this);b=d.closest(".modulefinder");function e(j){var g,h=j.module_list,f;if(j.error||!h){return;}g=b.find(".moduleList").data("module_list",h).removeAttr("disabled").empty();for(f in h){if(!h.hasOwnProperty(f)){continue;}a("<option />").attr("value",f).text(h[f].title).appendTo(g);}g.prop("selectedIndex",0).change().focus();if(!g.is(":visible")){g.slideDown(100,function(){b.find(".moduleIdList:not(:visible)").slideDown(100).trigger("show");}).trigger("show");}}b.find("a.tgAnchor.findsite").trigger("close.tc");a.exec_json("module.procModuleAdminGetList",{site_srl:d.data("site_srl")},e);}).end().find(".moduleList,.moduleIdList").hide().end().find(".moduleList").change(function(){var f,d,g,e;f=a(this);g=f.val();e=f.data("module_list");if(!e[g]){return;}e=e[g].list;d=f.closest(".modulefinder").find(".moduleIdList").removeAttr("disabled").empty();for(var b in e){if(!e.hasOwnProperty(b)){continue;}a("<option />").attr("value",e[b].module_srl).text(e[b].browser_title).appendTo(d);}d.prop("selectedIndex",0).change();});return this;};a(".modulefinder").xeModuleFinder();});jQuery(function(b){var a=0;_xeModuleSearch=function(){var e=this;var g=b(this);var d=g.data("multiple");if(!d){d="";}var f="__module_searcher_"+a;a++;b.exec_json("module.getModuleAdminModuleSearcherHtml",{id:f,is_multiple:d},function(p){if(!p||!p.html){return;}g.after(p.html).addClass("tgAnchor").attr("href","#"+f).xeContentToggler();var k=g.next(".moduleWindow");var m=k.find(".siteList");var h=k.find(".moduleList");var t=k.find(".instanceList");var u=m.find(">ul");var j=h.find(">ul");var l=t.find(">select");var n=k.find("input.siteFinder");var r;var s=280;function o(y,w){var x,v;y.find("li div").width("");y.css("height","auto");y.css("overflow-y","");if(y.height()>w){v=y.find("li div");v.width(v.width()-20+"px");y.css("height",w+"px");y.css("overflow-y","auto");}}function q(y){var v;var w=new RegExp(y,"ig");var x=r;u.empty();for(i=0,c=x.length;i<c;i++){v=x[i].domain;if(y){if(!v.match(w)){continue;}v=v.replace(w,function(z){return'<span class="highlight">'+z+"</span>";});}$li=b("<li />").appendTo(u);b("<a>").attr("href","#").html(v).data("site_srl",x[i].site_srl).appendTo($li);}o(u,s-n.parent("div").height());if(x.length==1){u.find("a").trigger("click");}}n.keyup(function(){q(n.val());});if(typeof console=="undefined"){console={log:function(){}};}g.not(".xe-module-search").addClass("xe-module-search").parent().find(".moduleTrigger").bind("before-open.tc",function(){var v;v=b(this);function w(z){var B,y=z.site_list,x,A;if(z.error||!b.isArray(y)){v.trigger("close.tc");return;}r=y;q(n.val());n.focus();}u.empty();l.empty();h.hide();t.hide();b.exec_json("admin.getSiteAllList",{domain:""},w);});k.find(".siteList>ul").delegate("a","click",function(w){var x,v;x=b(this);v=x.closest(".moduleSearch");function y(B){var A=B.module_list,z;if(B.error||!A){return;}for(z in A){if(!A.hasOwnProperty(z)){continue;}$li=b("<li />").appendTo(j);b("<a>").attr("href","#").html(A[z].title).data("moduleInstanceList",A[z].list).appendTo($li);}k.find(".moduleList").show();o(j,s);u.find("li").removeClass("x_active");x.parent("li").addClass("x_active");}j.empty();t.hide();b.exec_json("module.procModuleAdminGetList",{site_srl:x.data("site_srl")},y);w.preventDefault();}).end().find(".moduleList>ul").delegate("a","click",function(w){var A,y,B,z;A=b(this);z=A.data("moduleInstanceList");if(!z){return;}e.sSelectedModuleType=A.text();l.empty();for(var v in z){if(!z.hasOwnProperty(v)){continue;}$li=b("<option />").html(z[v].browser_title+" ("+z[v].mid+")").appendTo(l).val(z[v].module_srl).data("mid",z[v].mid).data("module_srl",z[v].module_srl).data("layout_srl",z[v].layout_srl).data("browser_title",z[v].browser_title);}t.show();o(l,s);j.find("li").removeClass("x_active");A.parent("li").addClass("x_active");w.preventDefault();}).end().find(".moduleSearch_ok").click(function(v){var w=[];l.find("option:selected").each(function(){w.push({type:e.sSelectedModuleType,module_srl:b(this).data("module_srl"),layout_srl:b(this).data("layout_srl"),browser_title:b(this).data("browser_title"),mid:b(this).data("mid")});});g.trigger("moduleSelect",[w]);b(".moduleTrigger").trigger("close.tc");v.preventDefault();});});return this;};b.fn.xeModuleSearch=function(){b(this).each(_xeModuleSearch);};b(".moduleTrigger").xeModuleSearch();b.fn.xeModuleSearchHtml=function(){var d=0;b(this).each(function(){var f=b(this);var h=f.attr("id");if(!h){h="__module_search_"+d;}d++;var e=b('<a class="x_btn moduleTrigger">'+xe.cmd_find+"</a>");var g=b('<input type="text" readonly>');f.after(e).after("&nbsp;").after(g).hide();e.xeModuleSearch();e.bind("moduleSelect",function(k,j){g.val(j[0].browser_title+" ("+j[0].mid+")");f.val(j[0].module_srl);});if(f.val()){b.exec_json("module.getModuleAdminModuleInfo",{module_srl:f.val()},function(j){if(!j||!j.module_info){return;}g.val(j.module_info.browser_title+" ("+j.module_info.mid+")");});}});return this;};b(".module_search").xeModuleSearchHtml();});jQuery(function(d){var b=false,a=d('<tr class="placeholder"><td>&nbsp;</td></tr>');d.fn.xeSortableTable=function(){this.not(".xe-sortable-table").addClass("xe-sortable-table").delegate("button.dragBtn","mousedown.st",function(e){var m,l,q,s,r,f,h,k,g,j,o,n,p;if(e.which!=1){return;}m=d(this);l=m.closest("tr");q=m.closest("table");p=q.get(0).offsetParent;r=l.height();f=l.width();before_event=d.Event("before-drag.st");q.trigger(before_event);if(before_event.isDefaultPrevented()){return false;}k={x:e.pageX,y:e.pageY};h=getOffset(l.get(0),p);$clone=l.attr("target",true).clone(true).appendTo(q);n=(s=q.find("thead th")).length;s.filter("[colspan]").attr("colspan",function(u,t){n+=t-1;});a.find("td").attr("colspan",n);g=[];q.find("tbody>tr:not([target],.sticky,:hidden)").each(function(){var t=d(this),u;u=getOffset(this,p);g.push({top:u.top,bottom:u.top+t.height(),$item:t});});$clone.addClass("draggable").css({position:"absolute",opacity:0.6,width:f,height:r,left:h.left,top:h.top,zIndex:100});a.css({position:"absolute",opacity:0.6,width:f,height:"10px",left:h.left,top:h.top,backgroundColor:"#bbb",overflow:"hidden",zIndex:99}).appendTo(q);l.css("opacity",0.6);d(document).unbind("mousedown.st mouseup.st").bind("mousemove.st",function(w){var x,u,v,t,z,y;o=null;x={x:k.x-w.pageX,y:k.y-w.pageY};u=h.top-x.y;for(t=0,z=g.length;t<z;t++){y=g[t];if((t&&y.top>u)||((t<z-1)&&y.bottom<u)){continue;}o={element:y.$item};if(y.top>u-12){o.state="before";a.css("top",y.top-5);}else{o.state="after";a.css("top",y.bottom-5);}}$clone.css({top:u});}).bind("mouseup.st",function(t){var u;b=false;d(document).unbind("mousemove.st mouseup.st");l.removeAttr("target").css("opacity","");$clone.remove();a.remove();if(!o){return;}u=d(o.element);u[o.state](l);q.trigger("after-drag.st");});});return this;};d("table.sortable").xeSortableTable();});jQuery(function(e){e(".filebox").bind("before-open.mw",function(){var k,h,j;var g;k=e(this);g=k.attr("href");h=e(g).find(".filebox_list");function l(m){h.html(m.html);h.find(".select").bind("click",function(p){var n=e("input.select_checkbox:checked");if(n.length==0){var o=e(this).closest("tr").find("img.filebox_item").attr("src");if(!o){alert("None selected!");}else{k.trigger("filebox.selected",[o]);k.trigger("close.mw");}}else{k.trigger("filebox.selected",[n]);k.trigger("close.mw");}return false;});h.find(".x_pagination").find("a").filter(function(){if(e(this).data("toggle")){return false;}if(e(this).parent().hasClass("x_disabled")){return false;}if(e(this).parent().hasClass("x_active")){return false;}return true;}).bind("click",function(){var n=e(this).attr("page");e.exec_json("module.getFileBoxListHtml",{page:n},l);return false;});e("#goToFileBox").find("button").bind("click",function(){var n=e(this).prev("input").val();e.exec_json("module.getFileBoxListHtml",{page:n},l);return false;});h.closest(".x_modal-body").scrollTop(0);}e.exec_json("module.getFileBoxListHtml",{page:"1"},l);});var f=e(".x .dsTg .__simple");var d=e(".x .dsTg .__detail");var a=e(".x .dsTg td.title");a.each(function(){var g=e(this);if(g.find("p.x_alert").length==0){g.addClass("tg").find(">*:not(:first-child)").hide();}});var b=e(".x .dsTg td.tg>*:not(:first-child)");f.click(function(){b.slideUp(200);d.removeClass("x_active");f.addClass("x_active");});d.click(function(){b.slideDown(200);d.addClass("x_active");f.removeClass("x_active");});});jQuery(function(a){a.fn.xeMultilingualWindow=function(s){var j=a(this);var k=j.find("#lang_create");var d=j.find("#lang_search");var b=false;s=a.extend({create_type:"save_and_use",modify_type:"save_and_use",view_use:true,view_modify:true,view_delete:false,list_count:5},s||{});if(s.create_type!="save_and_use"){k.find(".save-useit").text(xe.cmd_save);}function m(){if(k.is(":visible")&&b){if(confirm(xe.msg_confirm_save_and_use_multilingual)){k.find(".save-useit").trigger("click");}}return true;}function q(){if(d.is(":visible")&&d.find(".editMode").length){var t=d.find(".editMode");if(confirm(xe.msg_confirm_save_and_use_multilingual)){t.find(".save").trigger("click");}else{t.find(".cancel").trigger("click");}}return true;}function f(){d.find(".item > fieldset").hide().prev("a").children("i").removeClass("x_icon-chevrom-up").addClass("x_icon-chevron-down");j.find('[href="#lang_create"]').trigger("click");k.find(".editMode").children("textarea").val("");b=false;return true;}function p(t){if(!t){l(1,xe.current_lang,"","",false);}else{l(1,xe.current_lang,"",t,false);j.find('[href="#lang_search"]').trigger("click");}}function e(){if(!m()){return false;}if(!q()){return false;}if(!f()){return false;}}function o(u,v){var t=j.data("lang-target");b=false;if(t){t.trigger("selected.g11n",[u,v]);}}function l(x,v,w,u,t){if(typeof x=="undefined"){x=1;}if(typeof v=="undefined"){v=xe.current_lang;}if(typeof w=="undefined"){w="";}if(typeof u=="undefined"){u="";}if(typeof t=="undefined"){t=true;}a.exec_json("module.getModuleAdminLangListHtml",{page:x,lang_code:v,search_keyword:w,name:u,list_count:s.list_count},function(y){if(!y||!y.html){return;}d.html(y.html);g();h();n();r();if(t){document.location.href="#lang_search";}if(u){a("#lang_search").find('[href^="#lang-"]').trigger("click");}});}function g(){d.find(".x_pagination a").click(function(){var v=a(this).data("page");var u=a(this).data("search_keyword");var t=a(this).data("current_lang");if(!v){return;}l(v,t,u);return false;});d.find(".x_pagination").submit(function(){var v=a(this).find('[name="page"]').val();var u=a(this).data("search_keyword");var t=a(this).data("current_lang");if(!v){return false;}l(v,t,u);return false;});}function h(){d.find(".search").submit(function(){var u=a(this).find('[name="search_keyword"]').val();var t=a(this).find('[name="lang_code"]').val();l(1,t,u);return false;});d.find("#search_cancel").click(function(){l(1,xe.current_lang,"");});}function n(){d.find(".set").append('<i class="x_icon-chevron-down"></i>').click(function(){var v=a(this);var u=v.data("lang_code");q();var t="x_icon-chevron-up";var x="x_icon-chevron-down";if(v.next("fieldset").is(":visible")){v.children("i").removeClass(t).addClass(x);}else{v.parent(".item").siblings(".item").find("a > i").removeClass(t).addClass(x).end().children("fieldset").hide();v.children("i").removeClass(x).addClass(t);}if(typeof v.data("is_loaded")!="undefined"){return;}a.exec_json("module.getModuleAdminLangCode",{name:u},w);function w(y){var z=v.next("fieldset").find("textarea");z.each(function(){var C=a(this);var B=y.langs[C.data("lang")];var A=/^\$user_lang->/;if(A.test(B)){C.val("").data("value","");}else{C.val(B).data("value",B);}});v.data("is_loaded",true);}});}function r(){if(!s.view_use){d.find(".useit").hide();}if(!s.view_modify){d.find(".modify").hide();}if(!s.view_delete){d.find(".delete").hide();}if(s.modify_type=="save"){d.find(".save").text(xe.cmd_save);}d.find(".modify").click(function(){a(this).closest("fieldset").addClass("editMode").find("textarea").removeAttr("disabled");a(this).siblings(".cancel").prependTo(a(this).parent());a(this).siblings(".delete").attr("disabled","disabled");});d.find(".cancel").click(function(){a(this).closest("fieldset").removeClass("editMode").find("textarea").attr("disabled","disabled").each(function(){var t=a(this);t.val(t.data("value"));});a(this).siblings(".modify").prependTo(a(this).parent());a(this).siblings(".delete").removeAttr("disabled");return false;});d.find(".delete").click(function(){if(!confirm(xe.confirm_delete)){return;}var t=a(this);lang_name=t.closest(".item").find('[href^="#lang-"]').data("lang_code");a.exec_json("module.procModuleAdminDeleteLang",{name:lang_name},function(y){if(!y){return;}if(y.error){alert(y.message);return;}var u=d.find(".x_pagination");var x=u.data("page");var w=u.data("search_keyword");var v=u.data("lang_code");if(!x){$page=1;}l(x,v,w);});});d.find(".item").submit(function(){var w=a(this);var v=w.find(".editMode").children("textarea");var u=w.find('[href^="#lang-"]');var x={};var t=null;v.each(function(){var y=a(this);x[y.attr("class")]=y.val();y.data("tmp_value",y.val());if(xe.current_lang==y.attr("class")){t=y.val();}});x.lang_name=u.data("lang_code");a.exec_json("module.procModuleAdminInsertLang",x,function(y){if(!y||y.error||!y.name){return;}v.each(function(){var z=a(this);z.data("value",z.data("tmp_value"));});u.children("span").html(t);d.find(".cancel").trigger("click");w.find(".useit").trigger("click");});return false;});d.find(".useit").click(function(){var w=a(this);var u=w.closest(".item").find('[href^="#lang-"]');var t=u.data("lang_code");var v=u.children("span").text();o(t,v);});}j.find(".x_tabbable").xeTabbable();k.find(".editMode textarea").change(function(){b=true;});k.submit(function(){var u=a(this);var v={};var t=null;u.find(".editMode").children("textarea").each(function(){var x=a(this);v[x.attr("class")]=x.val();if(xe.current_lang==x.attr("class")){t=x.val();}});if(!t){alert(xe.msg_empty_multilingual);return false;}a.exec_json("module.procModuleAdminInsertLang",v,w);function w(x){if(!x||x.error||!x.name){return;}if(s.create_type=="save_and_use"){o(x.name,t);}else{alert(x.message);f();}}return false;});j.find('[href="#lang_search"]').click(function(){l();});j.bind("reset.g11n",function(){f();});j.bind("before-open.g11n",function(u,t){p(t);});j.bind("before-close.g11n",function(){return e();});return this;};});var is_loaded_multilingual_window_html=false;jQuery(function(a){a.fn.xeLoadMultilingualWindowHtml=function(){function b(e){var d=a(".x #content");a(e.html).appendTo(d).xeMultilingualWindow();a(".lang_code").trigger("loaded-multilingualWindow");}a.exec_json("module.getModuleAdminMultilingualHtml",{},b);return this;};});var multilingual_id_count=0;jQuery(function(a){a.fn.xeApplyMultilingualUI=function(){a(this).each(function(){if(!is_loaded_multilingual_window_html){a().xeLoadMultilingualWindowHtml();is_loaded_multilingual_window_html=true;}var e=a(this);var d=this;if(e.parent().hasClass("g11n")){e.siblings().remove();}else{e.wrap("<span></span>");}var f=e.attr("id");if(!f){f="__lang_code_"+multilingual_id_count;multilingual_id_count++;e.attr("id",f);}function b(){var m=a("#g11n");var j=e.width();if(d.tagName=="TEXTAREA"||e.data("type")=="textarea"){var o=a('<textarea id="lang_'+f+'" class="displayInput" style="width:'+j+'px" data-width="'+j+'">').data("lang-id",f);}else{var o=a('<input type="text" id="lang_'+f+'" class="displayInput" style="width:'+(j-28)+'px" data-width="'+(j-28)+'">').data("lang-id",f);}o.attr("placeholder",e.attr("placeholder"));var h=a('<button type="button" class="x_add-on remover" title="'+xe.cmd_remove_multilingual_text+'"><i class="x_icon-remove"></i>'+xe.cmd_remove_multilingual_text+"</button>").data("lang-target",f);var g=a('<a href="#g11n" class="x_add-on modalAnchor" title="'+xe.cmd_set_multilingual_text+'"><i class="x_icon-globe"></i>'+xe.cmd_set_multilingual_text+"</a>").data("lang-target",f);e.parent().addClass("g11n").addClass("x_input-append");e.after(o,h,g);e.hide();g.attr("href","#g11n").xeModalWindow();o.bind("selected.g11n",function(s,q,r){var p=o.width();if(!o.data("active")){p-=44;}o.width(p).attr("disabled","disabled").val(r).data("active",true).parent(".g11n").addClass("active");o.siblings("#"+o.data("lang-id")).val("$user_lang->"+q);g.trigger("close.mw");});g.bind("open.mw",function(){var p=a(this);var q=p.siblings(".displayInput");if(q.data("active")){m.trigger("before-open.g11n",q.prev(".lang_code").val().replace("$user_lang->",""));}else{m.trigger("before-open.g11n");}m.data("lang-target",q);});g.bind("before-close.mw",function(){return m.trigger("before-close.g11n");});h.click(function(){var r=a(this);var s=r.siblings(".displayInput");if(!s.data("active")){return;}var p=a("#lang_"+r.data("lang-target"));var q=p.width();p.val("").removeAttr("disabled").width(q+44).data("active",false).parent(".g11n").removeClass("active");r.siblings(".lang_code").val("");});var n=e;o.bind("change keyup",function(){e=a(this);if(e.data("active")){return;}n.val(e.val());});function k(){o.val(n.val()).width(o.data("width")).removeAttr("disabled");o.parent(".g11n").removeClass("active");}function l(){k();var p=/^\$user_lang->/;if(p.test(o.val())){function q(s){if(!s||!s.langs){return;}var r=o.width();o.closest(".g11n").addClass("active");o.val(s.langs[xe.current_lang]).attr("disabled","disabled").width(r-44).data("active",true);}a.exec_json("module.getModuleAdminLangCode",{name:o.val().replace("$user_lang->","")},q);}}e.bind("reload-multilingual",l);l();}if(a("#g11n").length){b();}else{e.bind("loaded-multilingualWindow",b);}});return this;};a('.vLang[type="hidden"]').each(function(){var b=a(this);if(b.next("textarea.vLang").length){b.data("type","textarea");}b.removeClass("vLang").addClass("lang_code");b.parent().find(".editUserLang").remove().end().find(".vLang").remove();});a(".lang_code").xeApplyMultilingualUI();});function getOffset(b,a){var e=0,d=0;while(b&&b!=a){e+=b.offsetTop;d+=b.offsetLeft;b=b.offsetParent;}return{top:e,left:d};}