function doInstallModule(a){var b=new Array();b.module_name=a;exec_xml("install","procInstallAdminInstall",b,completeInstallModule)}function doUpdateModule(a){var b=new Array();b.module_name=a;exec_xml("install","procInstallAdminUpdate",b,completeInstallModule)}function completeInstallModule(a){alert(a.message);location.reload()}jQuery(function(b){window.scrollTo(0,0);b(document.body).on("click",".x [data-toggle]",function(){var h=b(this);if(h.is("a")&&h.attr("href")!=h.attr("data-toggle")){var g=h.attr("href");h.attr("data-toggle",g)}var f=b(h.attr("data-toggle"));var j="a,input,button,textarea,select";f.toggle();if(f.is(":visible")&&!f.find(j).length){f.not(":disabled").attr("tabindex","0").focus()}else{if(f.is(":visible")&&f.find(j).length){f.not(":disabled").find(j).eq(0).focus()}else{h.focus()}}return false});b(document.body).on("click",".x [data-show]",function(){var g=b(this);if(g.is("a")&&g.attr("href")!=g.attr("data-show")){var f=g.attr("href");g.attr("data-show",f)}b(g.attr("data-show")).show().attr("tabindex","0").focus();return false});b(document.body).on("click",".x [data-hide]",function(){var g=b(this);if(g.is("a")&&g.attr("href")!=g.attr("data-hide")){var f=g.attr("href");g.attr("data-hide",f)}b(g.attr("data-hide")).hide();g.focus();return false});b.fn.xeTabbable=function(){b(this).each(function(){var f=b(this);f.find(">.x_nav-tabs>li>a").each(function(g){b(this).attr("data-index",g+1)});f.find(">.x_tab-content>.x_tab-pane").each(function(g){b(this).attr("data-index",g+1)})});b('.x .x_tab-content>.x_tab-pane:not(".x_active")').hide()};b(".x .x_tabbable").xeTabbable();b(document.body).on("click",'.x .x_nav-tabs>li>a[href*="#"]',function(){var f=b(this);if(f.parent("li").hasClass("x_disabled")){return false}f.parent("li").addClass("x_active").siblings().removeClass("x_active");f.closest(".x_nav-tabs").next(".x_tab-content").find(">.x_tab-pane").eq(f.attr("data-index")-1).addClass("x_active").show().siblings(".x_tab-pane").removeClass("x_active").hide();b(this).parents(".x_tabbable").trigger("tab_change",[parseInt(b(this).attr("data-index"))-1,b(this)]);return false});function a(){var h=b(".x>.body");var g=h.find(">.gnb");var f=h.children("#content.content");f.width("99.99%");setTimeout(function(){f.removeAttr("style");if(g.height()>f.height()){f.height(g.height())}},100)}b.fn.gnb=function(){var m=b(".x>.body");var j=m.find(">.gnb");var l=j.find(">ul>li");var h=new Date();h.setTime(h.getTime()+60*60*24*356);l.find(">a").prepend("<i />");l.find(">ul").prev("a").append("<b />");l.each(function(n){b(this).attr("data-index",n+1)});var k=l.find(">ul>li.active_").closest("li.active").attr("data-index");l.find(">ul>li.active_").clone().addClass("active").attr("data-index",k).prependTo("#gnbNav").find(">a").prepend("<i />");l.find(">a").click(function(){var p=b(this).parent("li");var r=p.hasClass("open");var o=p.hasClass("active");var n=p.find(">ul").length>=1;var q=m.hasClass("wide");function s(){m.removeClass("wide");a()}if(!r&&!o&&n){p.addClass("open").find(">ul").slideDown(100);s();return false}else{if(r&&!o&&n&&!q){p.removeClass("open").find(">ul").slideUp(100);s();return false}else{if(q&&!n||o||q&&r){s();return false}}}});j.find('>a[href="#gnbNav"]').click(function(){b(this).parent(".gnb").toggleClass("open");m.toggleClass("wide");if(b(window).width()<=980&&!j.hasClass("open")){b("#gnbNav").removeClass("ex")}a();if(b(this).parent(".gnb").hasClass("open")){setCookie("__xe_admin_gnb_status","open",h)}else{setCookie("__xe_admin_gnb_status","close",h)}return false});j.find(".exMenu>button").click(function(){b("#gnbNav").toggleClass("ex");a();if(b("#gnbNav").hasClass("ex")){setCookie("__xe_admin_gnb_ex_status","open",h)}else{setCookie("__xe_admin_gnb_ex_status","close",h)}});var f=getCookie("__xe_admin_gnb_status");if(f){setCookie("__xe_admin_gnb_status",f,h)}var g=getCookie("__xe_admin_gnb_ex_status");if(g){setCookie("__xe_admin_gnb_xe_status",g,h)}};b(".gnb").gnb();b(".x #lang").mouseleave(function(){b(this).hide()}).focusout(function(){var f=b(this);setTimeout(function(){if(!f.find("a:focus").length){f.mouseleave()}},500)});b('.x th>input[type="checkbox"]').change(function(){var g=b(this),f=g.data("name");g.closest("table").find(":checkbox").filter(function(){var h=b(this);return !h.prop("disabled")&&((h.attr("name")==f)||(h.data("name")==f))}).prop("checked",g.prop("checked")).end().end().trigger("update.checkbox",[f,this.checked])});b(document.body).on("click",".x .x_pagination .x_disabled, .x .x_pagination .x_active",function(){return false});if(b(".section").length>1){var d=b(".x .section").find(">h1:first");d.append('<button type="button" class="snToggle x_icon-chevron-up">Toggle this section</button>');b(".x .section.collapsed>h1>.snToggle").removeClass("x_icon-chevron-up").addClass("x_icon-chevron-down");d.find(">.snToggle").click(function(){var g=b(this);var f=g.closest(".section");if(!f.hasClass("collapsed")){f.addClass("collapsed");g.removeClass("x_icon-chevron-up").addClass("x_icon-chevron-down")}else{f.removeClass("collapsed");g.removeClass("x_icon-chevron-down").addClass("x_icon-chevron-up")}a()})}var e=b(".x .x_alert");e.prepend('<button type="button" class="x_close">&times;</button>');e.children(".x_close").click(function(){b(this).parent(".x_alert").hide()});b(".x .x_btn").click(function(){if(b(this).hasClass("x_disabled")){return false}});b.fn.vr=function(){this.each(function(){var f=b(this);if(f.text()=="|"){f.addClass("vr").filter(":first-child, :last-child").remove()}})};b(".x i").vr();b.fn.labelMaker=function(){this.each(function(h){h=h+1;var k=b(this);var g="input, textarea, select";var f=":radio, :checkbox";var l="[id]";var j="i"+h;if(k.next(g).filter(l).not(f).length){k.attr("for",k.next().attr("id"))}else{if(k.next(g).not(l).not(f).length){k.attr("for",j).next().attr("id",j)}else{if(k.prev(f).filter(l).length){k.attr("for",k.prev().attr("id"))}else{if(k.prev(f).not(l).length){k.attr("for",j).prev().attr("id",j)}else{if(k.children(g).filter(l).length){k.attr("for",k.children(g).filter(l).eq(0).attr("id"))}else{if(k.children(g).not(l).length){k.attr("for",j).children(g).not(l).eq(0).attr("id",j)}}}}}}})};b("label:not([for])").labelMaker();b.fn.checkToggle=function(){function f(){setTimeout(function(){b(":checked").parent("label").addClass("checked");b(':not(":checked")').parent("label").removeClass("checked")},0)}this.change(f);f()};b(":radio, :checkbox").checkToggle();b.fn.fileTypeOverlap=function(){this.each(function(){var f=b(this);f.wrap('<span class="fileBtn x_btn" />').before(f.attr("title"))})};b('input[type="file"].overlap').fileTypeOverlap();b.fn.tableSpan=function(){this.each(function(){var g=b(this);var h=g.find(">thead>tr:eq(0)>th").length;var f=g.find(">tbody>tr:eq(0)>td:only-child");if(h!=f.attr("colspan")){f.attr("colspan",h).css("text-align","center")}})};b("table").tableSpan()});jQuery(function(e){var f=27;var d=new Array();var b=1040;var a=e('<div class="x_modal-backdrop"></div>').appendTo("body").hide();e.fn.xeModalWindow=function(){this.not(".xe-modal-window").addClass("xe-modal-window").each(function(){e(e(this).attr("href")).addClass("x").hide()}).click(function(){var k=e(this),g,j,h;g=e(k.attr("href"));if(g.data("state")=="showing"){k.trigger("close.mw")}else{k.trigger("open.mw")}return false}).bind("open.mw",function(){var m=e(this),h,l,j,g,k;h=e(m.attr("href"));if(d.length&&d[d.length-1].get(0)==h.get(0)){return}if(!h.parent("body").length){l=e('<button type="button" class="x_close">&times;</button>');l.click(function(){h.data("anchor").trigger("close.mw")});h.find("[data-hide]").click(function(){h.data("anchor").trigger("close.mw")});e("body").append(h);h.prepend(l)}h.data("anchor",m);g=e.Event("before-open.mw");m.trigger(g);if(g.isDefaultPrevented()){return false}k=m.data("duration")||"fast";h.data("state","showing");function n(){m.trigger("after-open.mw")}e(document).bind("keydown.mw",function(p){if(p.which==f){m.trigger("close.mw");return false}});h.fadeIn(k,n).find("button.x_close:first").focus();e("body").css("overflow","hidden");d.push(h);var o=b+((d.length-1)*2);a.css("z-index",o).show();h.css("z-index",o+1)}).bind("close.mw",function(){var k=e(this),g,h,j;h=e(k.attr("href"));if(d.length&&d[d.length-1].get(0)!=h.get(0)){return}g=e.Event("before-close.mw");k.trigger(g);if(g.isDefaultPrevented()){return false}j=k.data("duration")||"fast";h.data("state","hiding");function l(){k.trigger("after-close.mw")}h.fadeOut(j,l);e("body").css("overflow","auto");k.focus();d.pop();var m=b+((d.length-1)*2);if(d.length){a.css("z-index",m)}else{a.hide()}});e("div.x_modal").addClass("x")};e("a.modalAnchor").xeModalWindow()});jQuery(function(b){var a=false;var d=27;b.fn.xeContentToggler=function(){this.not(".xe-content-toggler").addClass("xe-content-toggler").each(function(){var e=b(this);$layer=b(e.attr("href"));$layer.hide().not(".xe-toggling-content").addClass("xe-toggling-content").mousedown(function(f){a=true}).focusout(function(f){setTimeout(function(){if(!a&&!$layer.find(":focus").length&&$layer.data("state")=="showing"){e.trigger("close.tc")}a=false},1)})}).click(function(){var f=b(this),e;e=b(f.attr("href"));e.data("anchor",f);if(e.data("state")=="showing"){f.trigger("close.tc")}else{f.trigger("open.tc")}return false}).bind("open.tc",function(){var j=b(this),f,g,h;f=b(j.attr("href"));g=j.data("effect");h=j.data("duration")||"fast";f.data("state","showing");j.trigger("before-open.tc");a=false;b(document).unbind("mousedown.tc keydown.tc").bind("mousedown.tc keydown.tc",function(l){if(l){if(l.type=="keydown"&&l.which!=d){return true}if(l.type=="mousedown"){var m=b(l.target);if(m.is("html,.tgAnchor,.tgContent")||f.has(m).length){return true}}}j.trigger("close.tc");return false});function k(){j.trigger("after-open.tc")}switch(g){case"slide":f.slideDown(h,k);break;case"slide-h":var e=f.css({"overflow-x":"",width:""}).width();f.show().css({"overflow-x":"hidden",width:"0px"}).animate({width:e},h,function(){f.css({"overflow-x":"",width:""});k()});break;case"fade":f.fadeIn(h,k);break;default:f.show();j.trigger("after-open.tc")}}).bind("close.tc",function(){var h=b(this),e,f,g;b(document).unbind("mousedown.tc keydown.tc");e=b(h.attr("href"));f=h.data("effect");g=h.data("duration")||"fast";e.data("state","hiding");h.trigger("before-close.tc");function j(){h.trigger("after-close.tc")}switch(f){case"slide":e.slideUp(g,j);break;case"slide-h":e.animate({width:0},g,function(){e.hide();j()});break;case"fade":e.fadeOut(g,j);break;default:e.hide();h.trigger("after-close.tc")}});return this};b("a.tgAnchor").xeContentToggler()});jQuery(function(a){a.fn.xeModuleFinder=function(){this.not(".xe-module-finder").addClass("xe-module-finder").find("a.tgAnchor.findsite").bind("before-open.tc",function(){var d,b,e;d=a(this);b=a(d.attr("href")).find(">ul");e=d.prev("input:text").val();function f(j){var l,h=j.site_list,g,k;b.empty();d.closest(".modulefinder").find(".moduleList,.moduleIdList").attr("disabled","disabled");if(j.error||!a.isArray(h)){d.trigger("close.tc");return}for(g=0,k=h.length;g<k;g++){l=a("<li />").appendTo(b);a('<button type="button" />').text(h[g].domain).data("site_srl",h[g].site_srl).appendTo(l)}}a.exec_json("admin.getSiteAllList",{domain:e},f)}).end().find(".tgContent.suggestion").delegate("button","click",function(){var d,b;d=a(this);b=d.closest(".modulefinder");function e(j){var g,h=j.module_list,f;if(j.error||!h){return}g=b.find(".moduleList").data("module_list",h).removeAttr("disabled").empty();for(f in h){if(!h.hasOwnProperty(f)){continue}a("<option />").attr("value",f).text(h[f].title).appendTo(g)}g.prop("selectedIndex",0).change().focus();if(!g.is(":visible")){g.slideDown(100,function(){b.find(".moduleIdList:not(:visible)").slideDown(100).trigger("show")}).trigger("show")}}b.find("a.tgAnchor.findsite").trigger("close.tc");a.exec_json("module.procModuleAdminGetList",{site_srl:d.data("site_srl")},e)}).end().find(".moduleList,.moduleIdList").hide().end().find(".moduleList").change(function(){var f,d,g,e;f=a(this);g=f.val();e=f.data("module_list");if(!e[g]){return}e=e[g].list;d=f.closest(".modulefinder").find(".moduleIdList").removeAttr("disabled").empty();for(var b in e){if(!e.hasOwnProperty(b)){continue}a("<option />").attr("value",e[b].module_srl).text(e[b].browser_title).appendTo(d)}d.prop("selectedIndex",0).change()});return this};a(".modulefinder").xeModuleFinder()});jQuery(function(b){var a=0;_xeModuleSearch=function(){var e=this;var g=b(this);var d=g.data("multiple");if(!d){d=""}var f="__module_searcher_"+a;a++;b.exec_json("module.getModuleAdminModuleSearcherHtml",{id:f,is_multiple:d},function(p){if(!p||!p.html){return}g.after(p.html).addClass("tgAnchor").attr("href","#"+f).xeContentToggler();var k=g.next(".moduleWindow");var m=k.find(".siteList");var h=k.find(".moduleList");var t=k.find(".instanceList");var u=m.find(">ul");var j=h.find(">ul");var l=t.find(">select");var n=k.find("input.siteFinder");var r;var s=280;function o(y,w){var x,v;y.find("li div").width("");y.css("height","auto");y.css("overflow-y","");if(y.height()>w){v=y.find("li div");v.width(v.width()-20+"px");y.css("height",w+"px");y.css("overflow-y","auto")}}function q(y){var v;var w=new RegExp(y,"ig");var x=r;u.empty();for(i=0,c=x.length;i<c;i++){v=x[i].domain;if(y){if(!v.match(w)){continue}v=v.replace(w,function(z){return'<span class="highlight">'+z+"</span>"})}$li=b("<li />").appendTo(u);b("<a>").attr("href","#").html(v).data("site_srl",x[i].site_srl).appendTo($li)}o(u,s-n.parent("div").height());if(x.length==1){u.find("a").trigger("click")}}n.keyup(function(){q(n.val())});if(typeof console=="undefined"){console={log:function(){}}}g.not(".xe-module-search").addClass("xe-module-search").parent().find(".moduleTrigger").bind("before-open.tc",function(){var v;v=b(this);function w(z){var B,y=z.site_list,x,A;if(z.error||!b.isArray(y)){v.trigger("close.tc");return}r=y;q(n.val());n.focus()}u.empty();l.empty();h.hide();t.hide();b.exec_json("admin.getSiteAllList",{domain:""},w)});k.find(".siteList>ul").delegate("a","click",function(w){var x,v;x=b(this);v=x.closest(".moduleSearch");function y(B){var A=B.module_list,z;if(B.error||!A){return}for(z in A){if(!A.hasOwnProperty(z)){continue}$li=b("<li />").appendTo(j);b("<a>").attr("href","#").html(A[z].title).data("moduleInstanceList",A[z].list).appendTo($li)}k.find(".moduleList").show();o(j,s);u.find("li").removeClass("x_active");x.parent("li").addClass("x_active")}j.empty();t.hide();b.exec_json("module.procModuleAdminGetList",{site_srl:x.data("site_srl")},y);w.preventDefault()}).end().find(".moduleList>ul").delegate("a","click",function(w){var A,y,B,z;A=b(this);z=A.data("moduleInstanceList");if(!z){return}e.sSelectedModuleType=A.text();l.empty();for(var v in z){if(!z.hasOwnProperty(v)){continue}$li=b("<option />").html(z[v].browser_title+" ("+z[v].mid+")").appendTo(l).val(z[v].module_srl).data("mid",z[v].mid).data("module_srl",z[v].module_srl).data("layout_srl",z[v].layout_srl).data("browser_title",z[v].browser_title)}t.show();o(l,s);j.find("li").removeClass("x_active");A.parent("li").addClass("x_active");w.preventDefault()}).end().find(".moduleSearch_ok").click(function(v){var w=[];l.find("option:selected").each(function(){w.push({type:e.sSelectedModuleType,module_srl:b(this).data("module_srl"),layout_srl:b(this).data("layout_srl"),browser_title:b(this).data("browser_title"),mid:b(this).data("mid")})});g.trigger("moduleSelect",[w]);b(".moduleTrigger").trigger("close.tc");v.preventDefault()})});return this};b.fn.xeModuleSearch=function(){b(this).each(_xeModuleSearch)};b.fn.xeModuleSearchHtml=function(){var d=0;b(this).each(function(){var f=b(this);var h=f.attr("id");if(!h){h="__module_search_"+d}d++;var e=b('<a class="x_btn moduleTrigger">'+xe.cmd_find+"</a>");var g=b('<input type="text" readonly>');f.after(e).after("&nbsp;").after(g).hide();e.xeModuleSearch();e.bind("moduleSelect",function(k,j){g.val(j[0].browser_title+" ("+j[0].mid+")");f.val(j[0].module_srl)});if(f.val()){b.exec_json("module.getModuleAdminModuleInfo",{search_module_srl:f.val()},function(j){if(!j||!j.module_info){return}g.val(j.module_info.browser_title+" ("+j.module_info.mid+")")})}});return this}});jQuery(function(b){var a=b.fn.hide;b.fn.hide=function(g,j,h,e){b(this).trigger("hide",[e]);b(this).find(".active").removeClass("active");var f=b(this).attr("id");if(b(this).hasClass("col")){b(this).next().hide(g,j,h,e);if(f){b(this).parent().find('a[href="#'+f+'"]').parent("li.active").removeClass("active")}}return a.apply(this,arguments)};var d=b.fn.show;b.fn.show=function(f,j,h,e){b(this).trigger("show",[e]);if(b(this).hasClass("col")){b(this).next().hide(f,j,h,e);var g=b(this).parent();setTimeout(function(){g.scrollTo(g.width(),0,{duration:0})},0)}return d.apply(this,arguments)}});jQuery(function(d){d.xeMsgBox={htOptions:{}};var a=d.xeMsgBox.$msgBox=d("<section />").addClass("x_modal _common x").hide().css("z-index",9999);a.html('<button type="button" class="x_close _cancel">&times;</button>		<div class="x_modal-header">			<h1 class="_title"></h1>		</div>		<div class="x_modal-body">			<div class="_text"></div>		</div>		<div class="x_modal-footer">			<button type="button" class="x_btn x_pull-left _cancel">'+xe.cmd_cancel+'</button>			<button type="submit" class="x_btn x_btn-inverse x_pull-right x_btn-primary _ok">'+xe.cmd_confirm+"</button>		</div>");d("body").append(a);a.find("._ok").click(function(){d.xeMsgBox.fnOnOK()});a.find("._cancel").click(function(){d.xeMsgBox.fnOnCancel()});a.bind("show",function(){d.xeMsgBox.bVisible=true;d.xeMsgBox._showFoggy();d.xeMsgBox.fnOnShow();if(a.find("input,button").length>0){setTimeout(function(){a.find("input,button").each(function(g,f){var e=d(f);if(e.is(":visible")){e.focus();return false}})},0)}});a.bind("hide",function(){d.xeMsgBox.bVisible=false;d.xeMsgBox._hideFoggy();d.xeMsgBox.fnOnHide()});d(document.body).on("keydown",function(e){if(!d.xeMsgBox.bVisible){return}if(e.keyCode===27){a.find("._cancel").click();e.preventDefault()}});d.xeMsgBox.fnOnOK=function(){if(typeof d.xeMsgBox.htOptions.fnOnOK==="function"){if(d.xeMsgBox.htOptions.fnOnOK()){return}}a.hide()};d.xeMsgBox.fnOnCancel=function(){if(typeof d.xeMsgBox.htOptions.fnOnCancel==="function"){d.xeMsgBox.htOptions.fnOnCancel()}a.hide()};d.xeMsgBox.fnOnShow=function(){if(typeof d.xeMsgBox.htOptions.fnOnShow==="function"){d.xeMsgBox.htOptions.fnOnShow()}};d.xeMsgBox.fnOnHide=function(){if(typeof d.xeMsgBox.htOptions.fnOnHide==="function"){d.xeMsgBox.htOptions.fnOnHide()}};d.xeMsgBox.showMsgBox=function(h){d('head>link[rel="stylesheet"]:last').after('<link rel="stylesheet" href="./modules/menu/tpl/css/themes/default/style.css" />');h=d.xeMsgBox.htOptions=h||{};var e=h.sTitle||"";var f=h.sText||"";var g=h.bDanger||false;a.find("._title").html(e);a.find("._text").html(f);if(f===""){a.addClass("_nobody")}else{a.removeClass("_nobody")}var j=a.find("._ok");if(g){j.removeClass("x_btn-inverse");j.addClass("x_btn-danger")}else{j.removeClass("x_btn-danger");j.addClass("x_btn-inverse")}if(h.bSmall){a.addClass("_small")}else{a.removeClass("_small")}if(h.bAlert){a.addClass("_type_alert")}else{a.removeClass("_type_alert")}a.show()};d.xeMsgBox.alertDialog=function(e){e=e||{};e.bAlert=true;this.showMsgBox(e)};d.xeMsgBox.alert=function(e){htOptions={bAlert:true,bNobody:true,bSmall:true,sText:e};this.showMsgBox(htOptions)};d.xeMsgBox.confirmDialog=function(e){e=e||{};e.bAlert=false;this.showMsgBox(e)};var b=d.xeMsgBox.$foggyLayer=d("<div />");b.css({position:"absolute",top:0,left:0,backgroundColor:"#000",opacity:0.5,display:"none",zIndex:9998});d(d.find("body")).append(b);d.xeMsgBox._resizeFoggy=function(){b.css({width:0,height:0});setTimeout(function(){b.css({width:d(document).width(),height:d(document).height()})},0)};d(window).resize(d.xeMsgBox._resizeFoggy);d.xeMsgBox._resizeFoggy();d.xeMsgBox._showFoggy=function(){b.show()};d.xeMsgBox._hideFoggy=function(){b.hide()}});jQuery(function(b){b.xeFoggy={};var a=b.xeFoggy.$foggyLayer=b("<div />");a.css({position:"absolute",top:0,left:0,backgroundColor:"#000",opacity:0.5,display:"none",zIndex:9998});b("body").append(a);b.xeFoggy._resizeFoggy=function(){a.css({width:0,height:0});setTimeout(function(){a.css({width:b(document).width(),height:b(document).height()})},0)};b(window).resize(b.xeFoggy._resizeFoggy);b.xeFoggy._resizeFoggy();b.xeFoggy.show=function(d){if(d){a.css({opacity:0})}else{a.css({opacity:0.5})}a.show()};b.xeFoggy.hide=function(){a.hide()}});jQuery(function(d){var b=false,a=d('<tr class="placeholder"><td>&nbsp;</td></tr>');d.fn.xeSortableTable=function(){this.not(".xe-sortable-table").addClass("xe-sortable-table").delegate("button.dragBtn","mousedown.st",function(e){var m,l,q,s,r,f,h,k,g,j,o,n,p;if(e.which!=1){return}m=d(this);l=m.closest("tr");q=m.closest("table");p=q.get(0).offsetParent;r=l.height();f=l.width();before_event=d.Event("before-drag.st");q.trigger(before_event);if(before_event.isDefaultPrevented()){return false}k={x:e.pageX,y:e.pageY};h=getOffset(l.get(0),p);$clone=l.attr("target",true).clone(true).appendTo(q);n=(s=q.find("thead th")).length;s.filter("[colspan]").attr("colspan",function(u,t){n+=t-1});a.find("td").attr("colspan",n);g=[];q.find("tbody>tr:not([target],.sticky,:hidden)").each(function(){var t=d(this),u;u=getOffset(this,p);g.push({top:u.top,bottom:u.top+t.height(),$item:t})});$clone.addClass("draggable").css({position:"absolute",opacity:0.6,width:f,height:r,left:h.left,top:h.top,zIndex:100});a.css({position:"absolute",opacity:0.6,width:f,height:"10px",left:h.left,top:h.top,backgroundColor:"#bbb",overflow:"hidden",zIndex:99}).appendTo(q);l.css("opacity",0.6);d(document).unbind("mousedown.st mouseup.st").bind("mousemove.st",function(w){var x,u,v,t,z,y;o=null;x={x:k.x-w.pageX,y:k.y-w.pageY};u=h.top-x.y;for(t=0,z=g.length;t<z;t++){y=g[t];if((t&&y.top>u)||((t<z-1)&&y.bottom<u)){continue}o={element:y.$item};if(y.top>u-12){o.state="before";a.css("top",y.top-5)}else{o.state="after";a.css("top",y.bottom-5)}}$clone.css({top:u})}).bind("mouseup.st",function(t){var u;b=false;d(document).unbind("mousemove.st mouseup.st");l.removeAttr("target").css("opacity","");$clone.remove();a.remove();if(!o){return}u=d(o.element);u[o.state](l);q.trigger("after-drag.st")})});return this};d("table.sortable").xeSortableTable()});jQuery(function(e){e(".filebox").bind("before-open.mw",function(){var k,h,j;var g;k=e(this);g=k.attr("href");h=e(g).find(".filebox_list");function l(m){h.html(m.html);h.find(".select").bind("click",function(p){var n=e("input.select_checkbox:checked");if(n.length==0){var o=e(this).closest("tr").find("img.filebox_item").attr("src");if(!o){alert("None selected!")}else{k.trigger("filebox.selected",[o]);k.trigger("close.mw")}}else{k.trigger("filebox.selected",[n]);k.trigger("close.mw")}return false});h.find(".x_pagination").find("a").filter(function(){if(e(this).data("toggle")){return false}if(e(this).parent().hasClass("x_disabled")){return false}if(e(this).parent().hasClass("x_active")){return false}return true}).bind("click",function(){var n=e(this).attr("page");e.exec_json("module.getFileBoxListHtml",{page:n},l);return false});e("#goToFileBox").find("button").bind("click",function(){var n=e(this).prev("input").val();e.exec_json("module.getFileBoxListHtml",{page:n},l);return false});h.closest(".x_modal-body").scrollTop(0)}e.exec_json("module.getFileBoxListHtml",{page:"1"},l)});var f=e(".x .dsTg .__simple");var d=e(".x .dsTg .__detail");var a=e(".x .dsTg td.title");a.each(function(){var g=e(this);if(g.find("p.x_alert").length==0){g.addClass("tg").find(">*:not(:first-child)").hide()}});var b=e(".x .dsTg td.tg>*:not(:first-child)");f.click(function(){b.hide();d.removeClass("x_active");f.addClass("x_active")});d.click(function(){b.show();d.addClass("x_active");f.removeClass("x_active")})});jQuery(function(a){a.fn.xeMultilingualWindow=function(s){var j=a(this);var k=j.find("#lang_create");var d=j.find("#lang_search");var b=false;s=a.extend({create_type:"save_and_use",modify_type:"save_and_use",view_use:true,view_modify:true,view_delete:false,list_count:5},s||{});if(s.create_type!="save_and_use"){k.find(".save-useit").text(xe.cmd_save)}function m(){if(k.is(":visible")&&b){if(confirm(xe.msg_confirm_save_and_use_multilingual)){k.find(".save-useit").trigger("click")}}return true}function q(){if(d.is(":visible")&&d.find(".editMode").length){var t=d.find(".editMode");if(confirm(xe.msg_confirm_save_and_use_multilingual)){t.find(".save").trigger("click")}else{t.find(".cancel").trigger("click")}}return true}function f(){d.find(".item > fieldset").hide().prev("a").children("i").removeClass("x_icon-chevrom-up").addClass("x_icon-chevron-down");j.find('[href="#lang_create"]').trigger("click");k.find(".editMode").children("textarea").val("");b=false;return true}function p(t){if(!t){l(1,xe.current_lang,"","",false)}else{l(1,xe.current_lang,"",t,false);j.find('[href="#lang_search"]').trigger("click")}}function e(){if(!m()){return false}if(!q()){return false}if(!f()){return false}}function o(u,v){var t=j.data("lang-target");b=false;if(t){t.trigger("selected.g11n",[u,v])}}function l(x,v,w,u,t){if(typeof x=="undefined"){x=1}if(typeof v=="undefined"){v=xe.current_lang}if(typeof w=="undefined"){w=""}if(typeof u=="undefined"){u=""}if(typeof t=="undefined"){t=true}a.exec_json("module.getModuleAdminLangListHtml",{page:x,lang_code:v,search_keyword:w,name:u,list_count:s.list_count},function(y){if(!y||!y.html){return}d.html(y.html);g();h();n();r();if(t){document.location.href="#lang_search"}if(u){a("#lang_search").find('[href^="#lang-"]').trigger("click")}})}function g(){d.find(".x_pagination a").click(function(){var v=a(this).data("page");var u=a(this).data("search_keyword");var t=a(this).data("current_lang");if(!v){return}l(v,t,u);return false});d.find(".x_pagination").submit(function(){var v=a(this).find('[name="page"]').val();var u=a(this).data("search_keyword");var t=a(this).data("current_lang");if(!v){return false}l(v,t,u);return false})}function h(){d.find(".search").submit(function(){var u=a(this).find('[name="search_keyword"]').val();var t=a(this).find('[name="lang_code"]').val();l(1,t,u);return false});d.find("#search_cancel").click(function(){l(1,xe.current_lang,"")})}function n(){d.find(".set").append('<i class="x_icon-chevron-down"></i>').click(function(){var v=a(this);var u=v.data("lang_code");q();var t="x_icon-chevron-up";var x="x_icon-chevron-down";if(v.next("fieldset").is(":visible")){v.children("i").removeClass(t).addClass(x)}else{v.parent(".item").siblings(".item").find("a > i").removeClass(t).addClass(x).end().children("fieldset").hide();v.children("i").removeClass(x).addClass(t)}if(typeof v.data("is_loaded")!="undefined"){return}a.exec_json("module.getModuleAdminLangCode",{name:u},w);function w(y){var z=v.next("fieldset").find("textarea");z.each(function(){var C=a(this);var B=y.langs[C.data("lang")];var A=/^\$user_lang->/;if(A.test(B)){C.val("").data("value","")}else{C.val(B).data("value",B)}});v.data("is_loaded",true)}})}function r(){if(!s.view_use){d.find(".useit").hide()}if(!s.view_modify){d.find(".modify").hide()}if(!s.view_delete){d.find(".delete").hide()}if(s.modify_type=="save"){d.find(".save").text(xe.cmd_save)}d.find(".modify").click(function(){a(this).closest("fieldset").addClass("editMode").find("textarea").removeAttr("disabled");a(this).siblings(".cancel").prependTo(a(this).parent());a(this).siblings(".delete").attr("disabled","disabled")});d.find(".cancel").click(function(){a(this).closest("fieldset").removeClass("editMode").find("textarea").attr("disabled","disabled").each(function(){var t=a(this);t.val(t.data("value"))});a(this).siblings(".modify").prependTo(a(this).parent());a(this).siblings(".delete").removeAttr("disabled");return false});d.find(".delete").click(function(){if(!confirm(xe.confirm_delete)){return}var t=a(this);lang_name=t.closest(".item").find('[href^="#lang-"]').data("lang_code");a.exec_json("module.procModuleAdminDeleteLang",{name:lang_name},function(y){if(!y){return}if(y.error){alert(y.message);return}var u=d.find(".x_pagination");var x=u.data("page");var w=u.data("search_keyword");var v=u.data("lang_code");if(!x){$page=1}l(x,v,w)})});d.find(".item").submit(function(){var w=a(this);var v=w.find(".editMode").children("textarea");var u=w.find('[href^="#lang-"]');var x={};var t=null;v.each(function(){var y=a(this);x[y.attr("class")]=y.val();y.data("tmp_value",y.val());if(xe.current_lang==y.attr("class")){t=y.val()}});x.lang_name=u.data("lang_code");a.exec_json("module.procModuleAdminInsertLang",x,function(y){if(!y||y.error||!y.name){return}v.each(function(){var z=a(this);z.data("value",z.data("tmp_value"))});u.children("span").html(t);d.find(".cancel").trigger("click");w.find(".useit").trigger("click")});return false});d.find(".useit").click(function(){var w=a(this);var u=w.closest(".item").find('[href^="#lang-"]');var t=u.data("lang_code");var v=u.children("span").text();o(t,v)})}j.find(".x_tabbable").xeTabbable();k.find(".editMode textarea").change(function(){b=true});k.submit(function(){var u=a(this);var v={};var t=null;u.find(".editMode").children("textarea").each(function(){var x=a(this);v[x.attr("class")]=x.val();if(xe.current_lang==x.attr("class")){t=x.val()}});if(!t){alert(xe.msg_empty_multilingual);return false}a.exec_json("module.procModuleAdminInsertLang",v,w);function w(x){if(!x||x.error||!x.name){return}if(s.create_type=="save_and_use"){o(x.name,t)}else{alert(x.message);f()}}return false});j.find('[href="#lang_search"]').click(function(){l()});j.bind("reset.g11n",function(){f()});j.bind("before-open.g11n",function(u,t){p(t)});j.bind("before-close.g11n",function(){return e()});return this}});var is_loaded_multilingual_window_html=false;jQuery(function(a){a.fn.xeLoadMultilingualWindowHtml=function(){function b(e){var d=a("#content");a(e.html).appendTo(d).xeMultilingualWindow();a(".lang_code").trigger("loaded-multilingualWindow")}a.exec_json("module.getModuleAdminMultilingualHtml",{},b);return this}});var multilingual_id_count=0;jQuery(function(a){a.fn.xeApplyMultilingualUI=function(){a(this).each(function(){if(!is_loaded_multilingual_window_html){a().xeLoadMultilingualWindowHtml();is_loaded_multilingual_window_html=true}var e=a(this);var d=this;if(e.parent().hasClass("g11n")){e.siblings().remove()}else{e.wrap("<span></span>")}var f=e.attr("id");if(!f){f="__lang_code_"+multilingual_id_count;multilingual_id_count++;e.attr("id",f)}function b(){var m=a("#g11n");var j=e.width();if(d.tagName=="TEXTAREA"||e.data("type")=="textarea"){var o=a('<textarea id="lang_'+f+'" class="displayInput" style="width:'+j+'px" data-width="'+j+'">').data("lang-id",f)}else{var o=a('<input type="text" id="lang_'+f+'" class="displayInput" style="width:'+(j-28)+'px" data-width="'+(j-28)+'">').data("lang-id",f)}o.attr("placeholder",e.attr("placeholder"));var h=a('<button type="button" class="x_add-on remover" title="'+xe.cmd_remove_multilingual_text+'"><i class="x_icon-remove"></i>'+xe.cmd_remove_multilingual_text+"</button>").data("lang-target",f);var g=a('<a href="#g11n" class="x_add-on modalAnchor" title="'+xe.cmd_set_multilingual_text+'"><i class="x_icon-globe"></i>'+xe.cmd_set_multilingual_text+"</a>").data("lang-target",f);e.parent().addClass("g11n").addClass("x_input-append");e.after(o,h,g);e.hide();g.attr("href","#g11n").xeModalWindow();o.bind("selected.g11n",function(s,q,r){var p=o.width();if(!o.data("active")){p-=44}o.width(p).attr("disabled","disabled").val(r).data("active",true).parent(".g11n").addClass("active");o.siblings("#"+o.data("lang-id")).val("$user_lang->"+q);g.trigger("close.mw")});g.bind("open.mw",function(){var p=a(this);var q=p.siblings(".displayInput");if(q.data("active")){m.trigger("before-open.g11n",q.prev(".lang_code").val().replace("$user_lang->",""))}else{m.trigger("before-open.g11n")}m.data("lang-target",q)});g.bind("before-close.mw",function(){return m.trigger("before-close.g11n")});h.click(function(){var r=a(this);var s=r.siblings(".displayInput");if(!s.data("active")){return}var p=a("#lang_"+r.data("lang-target"));var q=p.width();p.val("").removeAttr("disabled").width(q+44).data("active",false).parent(".g11n").removeClass("active");r.siblings(".lang_code").val("")});var n=e;o.bind("change keyup",function(){e=a(this);if(e.data("active")){return}n.val(e.val())});function k(){o.val(n.val()).width(o.data("width")).removeAttr("disabled");o.parent(".g11n").removeClass("active")}function l(){k();var p=/^\$user_lang->/;if(p.test(o.val())){function q(s){if(!s||!s.langs){return}var r=o.width();o.closest(".g11n").addClass("active");o.val(s.langs[xe.current_lang]).attr("disabled","disabled").width(r-44).data("active",true)}a.exec_json("module.getModuleAdminLangCode",{name:o.val().replace("$user_lang->","")},q)}}e.bind("reload-multilingual",l);l()}if(a("#g11n").length){b()}else{e.bind("loaded-multilingualWindow",b)}});return this};a('.vLang[type="hidden"]').each(function(){var b=a(this);if(b.next("textarea.vLang").length){b.data("type","textarea")}b.removeClass("vLang").addClass("lang_code");b.parent().find(".editUserLang").remove().end().find(".vLang").remove()});a(".lang_code").xeApplyMultilingualUI()});function getOffset(b,a){var e=0,d=0;while(b&&b!=a){e+=b.offsetTop;d+=b.offsetLeft;b=b.offsetParent}return{top:e,left:d}}jQuery._xeAdminVar=jQuery._xeAdminVar||{};jQuery(function(d){var m;var j;var h;var k;var f;d.xeMenuSelectorVar={bMultiSelect:false};d.template("menuSelector_menuTree","<ul>{{html Nodes}}</ul>");d.template("menuSelector_menuTreeNode",'	<li>		<a href="#" class="_nodeType_${NodeType} _menu_node _menu_url_${MenuUrl}" data-param=\'{ "sMenuId":"${MenuId}", "sMenuUrl":"${MenuUrl}", "sMenuTitle":"${MenuTitle}", "sType":"${MenuType}", "sModuleSrl":"${ModuleSrl}" }\'>${MenuTitle}</a>		{{html SubTree}}	</li>');function g(p){var q=jQuery;var r=p.menuList;var o=b(r,0,"menuSelector_menuTree","menuSelector_menuTreeNode");m.html(o);f=q.xeMenuSelectorVar.bMultiSelect;var n={plugins:["themes","html_data","ui","crrm"],crrm:{move:{check_move:function(s){var t=this._get_parent(s.o);if(t===-1){return false}t=this._get_parent(s.np);if(!t){return false}return true}}},core:{}};if(!f){n.ui={select_multiple_modifier:false}}m.jstree(n).bind("loaded.jstree",function(t,u){u.inst.open_all();var w=q._xeAdminVar.sRenameOnload;q._xeAdminVar.sRenameOnload=null;var v=q._xeAdminVar.sSelectOnload;q._xeAdminVar.sSelectOnload=null;if(w){q("#siteMapTree").jstree("rename",q("#menu"+w));q("#menu"+w)[0].scrollIntoView(true)}if(v){var s=q("#menu"+v)[0];if(s){q("#siteMapTree").jstree("select_node",q(s));s.scrollIntoView(true)}}q(this).find("A._menu_node").filter(function(z,y){var x=q(y);if(!e(x)){x.css("opacity","0.2")}})}).bind("select_node.jstree",function(s,t){}).bind("before.jstree",function(s,t){if(t.func=="select_node"){$node=q(t.args[0]);if(!e($node)){s.stopImmediatePropagation();return false}}});m.find("._nodeType_1, ._nodeType_3").parent("li").addClass("x_disabled")}function e(n){var o=d.parseJSON(n.attr("data-param"));if(d.xeMenuSelectorVar.aAllowedType.length>0&&d.inArray(o.sType,d.xeMenuSelectorVar.aAllowedType)<0){return false}if(d.inArray(o.sType,d.xeMenuSelectorVar.aDisallowedType)>-1){return false}return true}d.xeShowMenuSelector=function(o,q,p,n){var r=jQuery;var s={menu_srl:0,site_srl:q};m=o;j=n;k=p;h={};r.exec_json("menu.getMenuAdminSiteMap",s,g)};function b(K,n,s,G){var r=jQuery;s=s||"menuSelector_menuTree";G=G||"menuSelector_menuTreeNode";var r=jQuery;if(K.length==0){return""}var q,B,o,p,z,u,E,t,n,y,H,v,D,L,J;var F;var A;var x="";var N;for(var I=0,w=K.length;I<w;I++){K[I].sParentSrl=n;A="";if(K[I].menuSrl){F=1}else{F=2}v="";switch(F){case 1:H=K[I].title;E=K[I].menuSrl;L=K[I].menuItems.list;N="#propertiesRoot";J="_ROOT";break;case 2:H=K[I].text;z=K[I].link;v=K[I].url;E=K[I].node_srl;p=K[I].expand;t=K[I].open_window;y=K[I].selected;q=K[I].active_btn;B=K[I].normal_btn;o=K[I].hover_btn;D=K[I].is_start_module;L=K[I].list;J=K[I].module_type;sModule=K[I].module;N="#properties";if(K[I].is_shortcut==="Y"){J="_SHORTCUT";v="";K[I].bShortCut=true}else{K[I].bShortCut=false}break;default:}h[E]=K[I];h[E].aNode=L||[];h[E].nNodeType=F;h[E].sNodeSrl=E;h[E].sText=H;h[E].sMenuNameKey=h[E].menu_name_key;h[E].sModuleSrl=A=h[E].module_srl;h[E].sModuleType=J;sSubTree="";if(L&&L.length>0){sSubTree=b(L,E,s,G)}var C=H;if(D){C+=" ${h}"}if(h[E].sModuleType==="_SHORTCUT"){C+=" ${s}";F=3}var M=r.tmpl(G,{MenuTitleWithHome:C,MenuTitle:H,MenuId:E,MenuUrl:v,NodeType:F,MenuType:J,SubTree:sSubTree,Target:N,ModuleSrl:A}).data("sMenuId",E).data("sMenuUrl",v).data("sMenuTitle",H).data("sMenuType",J);x+=M[0].outerHTML.replace("${h}","<i class='x_icon-home' title='Home Page'>[HOME]</i>").replace("${s}","<i class='x_icon-share' title='Shortcut'></i>")}return r.tmpl(s,{Nodes:x}).get()[0].outerHTML}d.xeShowMenuSelectorIn=function(o){d.xeMenuSelectorVar.$container=o;var n=o;d.xeMenuSelectorVar.bMultiSelect=""+n.data("multiple")=="true";d.xeMenuSelectorVar.aAllowedType=d.grep((""+(n.data("allowedType")||"")).split(","),function(p){return p!==""});d.xeMenuSelectorVar.aDisallowedType=d.grep((""+(n.data("disallowedType")||"")).split(","),function(p){return p!==""});d.xeMenuSelectorVar.aDisallowedType.push("_ROOT");d.xeMenuSelectorVar.aDisallowedType.push("_SHORTCUT");o.not("._eventBound").addClass("_eventBound").on("change",".site_selector",function(q){var p=d(this).val();d.xeShowMenuSelector(o.find(".tree"),p);o.trigger("site_changed")});d.exec_json("admin.getSiteAllList",{domain:""},l)};function a(o){var n=d(o.target);d.xeMenuSelectorVar.bMultiSelect=""+n.data("multiple")=="true";d.xeMenuSelectorVar.aAllowedType=d.grep((""+(n.data("allowedType")||"")).split(","),function(p){return p!==""});d.xeMenuSelectorVar.aDisallowedType=d.grep((""+(n.data("disallowedType")||"")).split(","),function(p){return p!==""});d.xeMenuSelectorVar.aDisallowedType.push("_ROOT");d.xeMenuSelectorVar.aDisallowedType.push("_SHORTCUT");if(d.inArray("page",d.xeMenuSelectorVar.aAllowedType)>-1){d.xeMenuSelectorVar.aAllowedType.push("ARTICLE","WIDGET","OUTSIDE")}if(d.inArray("page",d.xeMenuSelectorVar.aDisallowedType)>-1){d.xeMenuSelectorVar.aDisallowedType.push("ARTICLE","WIDGET","OUTSIDE")}d.xeMenuSelectorVar.$container=d.xeMsgBox.$msgBox;d.xeMsgBox.confirmDialog({sTitle:xe.msg_select_menu,sText:'<select class="site_selector" style="width:100%;display:none"></select><div class="tree"></div>',bSmall:true,bDanger:true,fnOnOK:function(){var p=[];m.find(".jstree-clicked").each(function(q,r){var s=d.parseJSON(d(this).attr("data-param"));p.push({browser_title:s.sMenuTitle,mid:s.sMenuUrl,module_srl:s.sModuleSrl,menu_id:s.sMenuId,type:s.sType})});n.trigger("moduleSelect",[p])}});d.exec_json("admin.getSiteAllList",{domain:""},l)}function l(n){var o=n.site_list;m=d.xeMenuSelectorVar.$container.find(".tree");var q=d.xeMenuSelectorVar.$container.find(".site_selector");var r=o.length;if(r<=1){q.hide()}else{q.html("");for(var p=0;p<r;p++){q.append(d("<option>").val(o[p].site_srl).html(o[p].domain))}q.show()}d.xeShowMenuSelector(m,"0")}d.fn.xeMenuSearchHtml=function(){var n=0;d(this).each(function(){var q=d(this);var u=q.attr("id");if(!u){u="__module_search_"+n}n++;var t=q.attr("data-multiple");var p=q.attr("data-allowedType");var r=q.attr("data-disallowedType");var o=d('<a class="x_btn moduleTrigger">'+xe.cmd_find+"</a>");o.data("multiple",t);o.data("allowedType",p);o.data("disallowedType",r);var s=d('<input type="text" readonly>');q.after(o).after("&nbsp;").after(s).hide();o.data("multiple",d(this).data("multiple"));o.on("click",a);o.bind("moduleSelect",function(w,v){s.val(v[0].browser_title+" ("+v[0].mid+")");q.val(v[0].module_srl)});if(q.val()){d.exec_json("module.getModuleAdminModuleInfo",{search_module_srl:q.val()},function(v){if(!v||!v.module_info){return}s.val(v.module_info.browser_title+" ("+v.module_info.mid+")")})}});return this};$msgBox=d(".x_modal._common");$msgBox.on("change",".site_selector",function(o){var n=d(this).val();d.xeShowMenuSelector(m,n)});d.fn.xeMenuSearch=function(){d(this).each(function(o,n){d(n).on("click",a)})};d(".module_search").xeMenuSearchHtml();d(".moduleTrigger").xeMenuSearch()});jQuery(function(a){try{window.alert=function(){return a.xeMsgBox.alert.apply(a.xeMsgBox,arguments)};setTimeout(function(){a("div.message.info").fadeOut(1000)},2500)}catch(b){}});jQuery(function(a){a("#site,.x_modal._common").on("keydown","input",function(d){var e,b;if(d.keyCode===13){e=a(d.target).parent();while(e&&!e.hasClass("col")){b=e.find("button.x_btn-primary,button.x_btn-inverse");if(b.length>0){if(a(d.target).hasClass("displayInput")){a(d.target).blur()}d.preventDefault();b.click();break}e=e.parent()}}})});