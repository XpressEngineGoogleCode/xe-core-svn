<!--#include("header.html")-->
<load target="js/point_admin.js" usecdn="true" />
<p>{$lang->about_point_module} {$lang->point_update_desc}</p>
<div cond="$XE_VALIDATOR_MESSAGE" class="message {$XE_VALIDATOR_MESSAGE_TYPE}">
	<p>{$XE_VALIDATOR_MESSAGE}</p>
</div>
<!-- 검색 -->
<form action="./" method="get" no-error-return-url="true" class="x_clearfix">
<input type="hidden" name="module" value="{$module}" />
<input type="hidden" name="act" value="{$act}" />
    <fieldset>
		<div class="x_pull-right search x_input-append" style="margin:0px">
        <select name="is_admin" style="width:auto">
            <option value="" <!--@if($is_admin!='Y')-->selected="selected"<!--@end-->>{$lang->total}</option>
            <option value="Y" <!--@if($is_admin=='Y')-->selected="selected"<!--@end-->>{$lang->is_admin}</option>
        </select>
        <select name="is_denied" style="width:auto">
            <option value="" <!--@if($is_denied!='Y')-->selected="selected"<!--@end-->>{$lang->total}</option>
            <option value="Y" <!--@if($is_denied=='Y')-->selected="selected"<!--@end-->>{$lang->denied}</option>
        </select>
        <select name="selected_group_srl" style="width:auto">
            <option value="0">{$lang->member_group}</option>
            <!--@foreach($group_list as $key => $val)-->
            <option value="{$val->group_srl}" <!--@if($selected_group_srl==$val->group_srl)-->selected="selected"<!--@end-->>{$val->title}</option>
            <!--@end-->
        </select>
        <select name="search_target" style="width:auto">
            <option value="">{$lang->search_target}</option>
			<option value="{$identifier}" selected="selected"|cond="$search_target == $identifier">{Context::getLang($identifier)}</option>
            <!--@foreach($lang->search_target_list as $key => $val)-->
            <option value="{$key}" <!--@if($search_target==$key)-->selected="selected"<!--@end-->>{$val}</option>
            <!--@end-->
        </select>
        <input type="search" name="search_keyword" value="{htmlspecialchars($search_keyword)}" />
        <input class="x_btn x_btn-inverse" type="submit" value="{$lang->cmd_search}" />
        <button class="x_btn" type="button" onclick="location.href='{getUrl('','module',$module,'act',$act)}';return false;">{$lang->cmd_cancel}</button>
		</div>
    </fieldset>
</form>

<table class="x_table x_table-striped x_table-hover">
	<caption>Total {number_format($total_count)}, Page {number_format($page)}/{number_format($total_page)}</caption>
	<thead>
		<tr>
			<th scope="col">{$lang->no}</th>
			<th scope="col">{Context::getLang($identifier)}</th>
			<th scope="col">{$lang->nick_name}</th>
			<th scope="col">{$lang->point}</th>
			<th scope="col">{$lang->level}</th>
		</tr>
	</thead>
	<tbody>
		<tr loop="$member_list => $no,$val">
			<td>{$no}</td>
			<td cond="$identifier == 'user_id'">{$val->user_id}</td>
			<td cond="$identifier != 'user_id'">{$val->email_address}</td>
			<td><a href="#popup_menu_area" class="member_{$val->member_srl}">{$val->nick_name}</a></td>
			<td>
				<form action="./" method="get">
					<input type="hidden" name="module" value="point" />
					<input type="hidden" name="member_srl" value="{$val->member_srl}" />
					<input type="text" name="orgpoint" value="{$val->point}" disabled="disabled" style="width:40px;text-align:right" />
					<input type="text" id="point_{$val->member_srl}" name="point" style="width:40px;text-align:right" />
					<input type="button" value="{$lang->cmd_update}" onclick="updatePoint({$val->member_srl})" class="text" />
				</form>
			</td>
			<td>{$val->level}</td>
		</tr>
	</tbody>
</table>

<form ruleset="updatePoint" id="updateForm" action="./" method="POST">
	<input type="hidden" name="module" value="point" />
	<input type="hidden" name="act" value="procPointAdminUpdatePoint" />
    <input type="hidden" id="update_member_srl" name="member_srl" value="" />
    <input type="hidden" id="update_point" name="point" />
</form>


<!-- 페이지 네비게이션 -->
<div class="x_pagination x_pagination-centered">
	<ul>
		<li class="x_disabled"|cond="$page == 1 || !$page"><a href="{getUrl('page','','module_srl','')}">&laquo; {$lang->first_page}</a></li>
		<!--@while($page_no = $page_navigation->getNextPage())-->
		{@$last_page = $page_no}
		<li class="x_active"|cond="$page == $page_no">
			<span cond="$page == $page_no">{$page_no}</span>
			<a cond="$page != $page_no" href="{getUrl('page',$page_no,'module_srl','')}">{$page_no}</a>
		</li>
		<!--@end-->
		<li cond="$last_page != $page_navigation->last_page">
			<a href="#goTo" data-toggle="#goTo" title="Jump to">...</a>
			<span id="goTo" class="x_input-append">
				<input type="number" required name="page" title="Go to">
				<button type="submit" class="x_add-on">Go</button>
			</span>
		</li>
    	<li class="x_disabled"|cond="$page == $page_navigation->last_page"><a href="{getUrl('page',$page_navigation->last_page,'module_srl','')}" class="direction">{$lang->last_page} &rsaquo;</a></li>
	</ul>
</div>

<!-- 검색 -->
<form action="./" method="get" no-error-return-url="true" class="x_clearfix">
<input type="hidden" name="module" value="{$module}" />
<input type="hidden" name="act" value="{$act}" />
    <fieldset>
		<div class="x_pull-right search x_input-append">
        <select name="is_admin" style="width:auto">
            <option value="" <!--@if($is_admin!='Y')-->selected="selected"<!--@end-->>{$lang->total}</option>
            <option value="Y" <!--@if($is_admin=='Y')-->selected="selected"<!--@end-->>{$lang->is_admin}</option>
        </select>
        <select name="is_denied" style="width:auto">
            <option value="" <!--@if($is_denied!='Y')-->selected="selected"<!--@end-->>{$lang->total}</option>
            <option value="Y" <!--@if($is_denied=='Y')-->selected="selected"<!--@end-->>{$lang->denied}</option>
        </select>
        <select name="selected_group_srl" style="width:auto">
            <option value="0">{$lang->member_group}</option>
            <!--@foreach($group_list as $key => $val)-->
            <option value="{$val->group_srl}" <!--@if($selected_group_srl==$val->group_srl)-->selected="selected"<!--@end-->>{$val->title}</option>
            <!--@end-->
        </select>
        <select name="search_target" style="width:auto">
            <option value="">{$lang->search_target}</option>
			<option value="{$identifier}" selected="selected"|cond="$search_target == $identifier">{Context::getLang($identifier)}</option>
            <!--@foreach($lang->search_target_list as $key => $val)-->
            <option value="{$key}" <!--@if($search_target==$key)-->selected="selected"<!--@end-->>{$val}</option>
            <!--@end-->
        </select>
        <input type="search" name="search_keyword" value="{htmlspecialchars($search_keyword)}" />
        <input class="x_btn x_btn-inverse" type="submit" value="{$lang->cmd_search}" />
        <button class="x_btn" type="button" onclick="location.href='{getUrl('','module',$module,'act',$act)}';return false;">{$lang->cmd_cancel}</button>
		</div>
    </fieldset>
</form>
