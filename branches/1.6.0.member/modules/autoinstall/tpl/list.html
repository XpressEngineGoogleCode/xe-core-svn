<include target="category.html" />


<table cellpadding="0" cellspacing="0" class="xe-ui-table">
    <caption>
        <p class="f-left">
        <block cond="$current_category">{$current_category}</block>
        <block cond="!$current_category">All</block>
        ({sprintf('%d', $page_navigation->total_count)})
        </p>
        <p class="f-right" cond="$act == 'dispAutoinstallAdminIndex'">
            <!--@if($order_target == 'newest')-->
            <!--@if($order_type == 'desc')-->{@$_newest_order_type = 'asc'}<!--@else-->{@$_newest_order_type = 'desc'}<!--@end-->
            <!--@else-->
            {@$_newest_order_type = 'desc'}
            <!--@end-->
            <!--@if($order_target == 'download')-->
            <!--@if($order_type == 'desc')-->{@$_download_order_type = 'asc'}<!--@else-->{@$_download_order_type = 'desc'}<!--@end-->
            <!--@else-->
            {@$_download_order_type = 'desc'}
            <!--@end-->
            <!--@if($order_target == 'popular')-->
            <!--@if($order_type == 'desc')-->{@$_popular_order_type = 'asc'}<!--@else-->{@$_popular_order_type = 'desc'}<!--@end-->
            <!--@else-->
            {@$_popular_order_type = 'desc'}
            <!--@end-->
            Sort by
            <a href="{getUrl('order_target','newest','order_type',$_newest_order_type)}">{$lang->order_newest}<!--@if($order_target == 'newest')--><!--@if($_newest_order_type == 'asc')-->▼<!--@else-->▲<!--@end--><!--@end--></a> |
            <a href="{getUrl('order_target','download','order_type',$_download_order_type)}">{$lang->order_download}<!--@if($order_target == 'download')--><!--@if($_download_order_type == 'asc')-->▼<!--@else-->▲<!--@end--><!--@end--></a> |
            <a href="{getUrl('order_target','popular','order_type',$_popular_order_type)}">{$lang->order_popular}<!--@if($order_target == 'popular')--><!--@if($_popular_order_type == 'asc')-->▼<!--@else-->▲<!--@end--><!--@end--></a>
        </p>
    </caption>
    <thead>
        <tr>
            <th scope="col">{$lang->category}</th>
            <th scope="col">{$lang->thumbnail}</th>
            <th scope="col">{$lang->name}</th>
            <th scope="col" width="15%">{$lang->distribute_version}</th>
            <th scope="col" width="15%">{$lang->current_version}</th>
            <th scope="col">{$lang->run}</th>
        </tr>
    </thead>
    <tbody>
        <tr loop="$item_list => $key, $item">
            {@ $target_url = $original_site."?mid=download&package_srl=".$item->package_srl; }
            <td class="center">{$item->category}</td>
            <td class="center">
                <img src="{str_replace('./', $uri, $item->item_screenshot_url)}" alt="" width="100" height="100" class="xe-ui-panel-img"/>
            </td>
            <td class="title">
                <p><a href="{$target_url}">{htmlspecialchars($item->title)}</a></p>
                <p>{cut_str(htmlspecialchars($item->package_description),200)}</p>
                <p>
    <block cond="(int)$item->package_voter > 0">
        <span class="starRating">
            <span style="width:{sprintf("%d",$item->package_voted/$item->package_voter*20)}%">{sprintf($lang->rate, $item->package_start)}</span>
            </span>
            {sprintf("%0.1f",$item->package_voted/$item->package_voter*2)}/{number_format($item->package_voter)} |
        </block>
        <block cond="(int)$item->package_voter <= 0">
            <span class="starRating"><span style="width:0%">0</span></span>
                0/0 |
            </block>
            {$lang->package_update} {zdate($item->item_regdate, "Y-m-d H:i")} |
            {$lang->package_downloaded_count} : {number_format($item->package_downloaded)}
        </p>
        <p cond="$item->deps">{$lang->dependant_list}:</p>
        <ul cond="$item->deps">
            <li loop="$item->deps => $package_srl">{$installed[$package_srl]->title}</li>
        </ul>
    </td>
    <td class="center">{htmlspecialchars($item->item_version)}</td>
    <td class="center">{htmlspecialchars($item->current_version)}</td>
    <td class="button center">
        <a cond="!$item->current_version" href="{getUrl('act','dispAutoinstallAdminInstall','package_srl',$item->package_srl)}" class="xe-ui-button-gray">{$lang->install}</a>
        <a cond="!$show_ftp_note && $item->current_version && $item->avail_remove" href="{getUrl('act','dispAutoinstallAdminUninstall','package_srl',$item->package_srl)}" class="xe-ui-button-gray">{$lang->cmd_delete}</a>
        <a cond="$item->current_version && $item->need_update == 'Y'" href="{getUrl('act','dispAutoinstallAdminInstall','package_srl',$item->package_srl)}" class="xe-ui-button-gray">{$lang->update}</a>
    </td>
</tr>
</tbody>
</table>

<form cond="$act == 'dispAutoinstallAdminIndex'" action="./" id="search_fo">
    <input type="hidden" name="error_return_url" value="" />
    <input type="hidden" name="module" value="{$module}" />
    <input type="hidden" name="act" value="{$act}" />
    <input cond="$order_target" type="hidden" name="order_target" value="{$order_target}" />
    <input cond="$order_type" type="hidden" name="order_type" value="{$order_type}" />
    <input cond="$category_srl" type="hidden" name="category_srl" value="{$category_srl}" />
    <input cond="$childrenList" type="hidden" name="childrenList" value="{$childrenList}" />
    <p class="center">
        <input name="search_keyword" value="{$search_keyword}" class="xe-ui-panel-text"/>
        <a href="#" onclick="jQuery('#search_fo').submit();return false;" class="xe-ui-button-gray">Search</a>
    </p>
</form>

</div>
<div class="xe-ui-panel-controller">
    <hr />
    <form action="./" cond="$page_navigation" id="nav_fo">
        <input type="hidden" name="error_return_url" value="" />
        <input type="hidden" name="module" value="{$module}" />
        <input type="hidden" name="act" value="{$act}" />
        <input cond="$order_target" type="hidden" name="order_target" value="{$order_target}" />
        <input cond="$order_type" type="hidden" name="order_type" value="{$order_type}" />
        <input cond="$category_srl" type="hidden" name="category_srl" value="{$category_srl}" />
        <input cond="$childrenList" type="hidden" name="childrenList" value="{$childrenList}" />
        <input cond="$search_keyword" type="hidden" name="search_keyword" value="{$search_keyword}" />

        <p style="text-align: center;">
        <a href="{getUrl('page', '')}" class="xe-ui-button-gray pagination first"><img src="{getFullUrl()}common/img/pagination_left.png"/></a>
    <block cond="$page_navigation->first_page + $page_navigation->page_count > $page_navigation->last_page && $page_navigation->page_count != $page_navigation->total_page">
        {@$isGoTo = true}
        <a href="{getUrl('page', '')}" class="xe-ui-button-gray pagination">1</a>
        <a href="#goTo" class="tgAnchor" title="{$lang->cmd_go_to_page}">...</a>
    </block>
    <!--@while($page_no = $page_navigation->getNextPage())-->
    {@$last_page = $page_no}
    <a href="#" cond="$page_no == $page" class="xe-ui-button-gray pagination disabled">{$page_no}</a>
    <a cond="$page_no != $page" href="{getUrl('page', $page_no)}" class="xe-ui-button-gray pagination">{$page_no}</a>
    <!--@end-->
    <block cond="$last_page != $page_navigation->last_page">
        {@$isGoTo = true}
        <a href="#goTo" class="tgAnchor" title="{$lang->cmd_go_to_page}">...</a>
        <a href="{getUrl('page', $page_navigation->last_page)}" class="xe-ui-button-gray pagination">{$page_navigation->last_page}</a>
    </block>
    <a href="{getUrl('page', $page_navigation->last_page)}" class="xe-ui-button-gray pagination last"><img src="{getFullUrl()}common/img/pagination_right.png"/></a>
    <span cond="$isGoTo" id="goTo" class="tgContent">
        <input name="page" class="xe-ui-panel-text"/>
        <a href="#" class="xe-ui-button-gray" onclick="jQuery('#nav_fo').submit();return false;">Go</a>
    </span>
    </p>
</form>
</div>
<include target="footer.html" />