<script type="text/javascript">
    function rel() {
        option = jQuery('#analytics_type').val();
        if (!option) {
            return ;
        }
        url = "{getNotEncodedFullUrl('','module','admin','act','dispAdminDashboardGA')}&type=" + option;
        window.location.replace(url);
    }
</script>

<h1>{$lang->analytics_title}</h1>
<div class="xe-ui-title-separator">
    <hr/>
</div>

<div id="content" class="cleared">
    <div cond="$XE_VALIDATOR_MESSAGE" class="xe-ui-message {$XE_VALIDATOR_MESSAGE_TYPE} gradient cleared">
        <a href="#" style="float: right;" onclick="jQuery(this).parent().remove();return false;" class="xe-ui-button-gray gradient">Dismiss</a>
        <p>{$XE_VALIDATOR_MESSAGE}</p>
    </div>
    <!--@if(!$have_curl&&$type=='ga')-->
    <div class="xe-ui-message error gradient cleared">
        <p>{$lang->curl_extension_not_exist}</p>
    </div>
    <!--@end-->
    <div class="xe-ui-panel">
        <div class="xe-ui-panel-content cleared">
            <form id="form_analytics" action="./" method="post">
                <p>
                    <label for="analytics_type">{$lang->choose_analytics_api}</label>
                    <select id="analytics_type" name="analytics_type" onchange="rel();" class="xe-ui-panel-select">
                        <option value="">-- Please choose an option --</option>
                        <option value="xe" <!--@if($type=='xe')-->selected="selected"<!--@end-->>XE Analytics</option>
                        <option value="ga" <!--@if($type=='ga')-->selected="selected"<!--@end-->>Google Analytics</option>
                        <!--<option value="naver">Naver Analytics</option>-->
                    </select>
                </p>
                <input type="hidden" name="type" value="{$type}" />
                <input type="hidden" name="module" value="admin" />
                <input type="hidden" name="act" id="act" value="procAdminSaveGAInfo" />
                <div id="form_ga" <!--@if($type!='ga')-->style="display:none;"<!--@end-->>
                     <table class="xe-ui-form-table" cellspacing="0" cellpadding="0">
                        <tr>
                            <td class="v-top">
                                <label for="ga_script">{$lang->ga_script}:</label>
                            </td>
                            <td>
                                <textarea class="xe-ui-panel-text" name="ga_script" id="ga_script" cols="60" rows="10">{$script}</textarea>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <p>
                                    <label for="ga_client_id">{$lang->ga_client_id}:</label>
                                </p>
                            </td>
                            <td>
                                <p>
                                    <input class="xe-ui-panel-text" type="text" name="ga_client_id" id="ga_client_id"  value='{$client_id}' style="width: 500px;" />
                                </p>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <p>
                                    <label for="ga_client_secret">{$lang->ga_client_secret}:</label>
                                </p>
                            </td>
                            <td>
                                <p>
                                    <input class="xe-ui-panel-text" type="text" name="ga_client_secret" id="ga_client_secret" value='{$client_secret}' style="width: 500px;"/>
                                </p>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <p>
                                    <label for="ga_developer_key">{$lang->ga_developer_key}:</label>
                                </p>
                            </td>
                            <td>
                                <p>
                                    <input class="xe-ui-panel-text" type="text" name="ga_developer_key" id="ga_developer_key" value='{$developer_key}' style="width: 500px;" />
                                </p>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <p>
                                    <label for="ga_redirect_uri">{$lang->ga_redirect_uri}:</label>
                                </p>
                            </td>
                            <td>
                                <p>
                                    <input class="xe-ui-panel-text" type="text" name="ga_redirect_uri" id="ga_redirect_uri" value="{getFullUrl('','module','admin','act','procAdminSaveGAAuthToken')}" readonly="readonly" style="width: 500px;" />
                                </p>
                            </td>
                        </tr>
                    </table>
                </div>
                <div id="form_xe" <!--@if($type!='xe')-->style="display:none;"<!--@end-->>
                     <table class="xe-ui-form-table" cellspacing="0" cellpadding="0">
                        <tr>
                            <td>
                                <p>You have nothing to set up for this option. Just save your option for Dashboard analytics.</p>
                            </td>
                        </tr>
                    </table>
                </div>
            </form>
            <!--@if(isset($analytics_type))-->
            <script>
                jQuery("#analytics_type option[value='{$analytics_type}']").attr("selected","selected");
                jQuery("#form_{$analytics_type}").show();
            </script>
            <!--@end-->
        </div>
        <div class="xe-ui-panel-controller">
            <hr>
            <p class="center">
                <a href="#" onclick="javascript: document.getElementById('form_analytics').submit();" class="xe-ui-button-gray<!--@if(!$have_curl && $type == 'ga')--> disabled<!--@end-->">{$lang->cmd_save}</a>
                <!--@if(isset($analytics_type) && $analytics_type == 'ga')-->
                <a href="#" onclick="javascript: window.location.href = '{getUrl('','module','admin','act','procAdminSaveGAAuthToken')}';" class="xe-ui-button-gray<!--@if(!$have_curl)--> disabled<!--@end-->">{$lang->accept_ga_api}</a>
                <!--@end-->
            </p>
        </div>
    </div>
</div>
