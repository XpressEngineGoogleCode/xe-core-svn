<load target="js/multilingual.js" usecdn="true" />

<h1>{$lang->menu_gnb_sub['multilingual']}</h1>
<div class="xe-ui-title-separator">
    <hr/>
</div>

<div id="content" class="cleared">
    <div cond="$XE_VALIDATOR_MESSAGE" class="xe-ui-message {$XE_VALIDATOR_MESSAGE_TYPE} gradient cleared">
        <a href="#" style="float: right;" onclick="jQuery(this).parent().remove();return false;" class="xe-ui-button-gray gradient">Dismiss</a>
        <p>{$XE_VALIDATOR_MESSAGE}</p>
    </div>
    <div class="xe-ui-panel">
        <div class="xe-ui-panel-content" id="langList">
            <p>{$lang->multilingual_desc}</p>
            <p class="f-right">
                <a href="#addWord" class="xe-ui-button-gray modalAnchor">{$lang->add_word}</a>
            </p>
            <div class="cleared"></div>
            <p cond="!is_array($lang_code_list) || count($lang_code_list) < 1">
                {$lang->no_multi_lang}
            </p>
            <div loop="$lang_code_list=>$key,$value">
                {@$langName = $value->name}
                <strong>{$value->value}</strong>
                <span class="side">
                    <button type="button" class="text" cond="$module != 'admin'" onclick="doInsertLangCode('{$value->name}', '{$target}')">{$lang->cmd_apply}</button>
                    <button type="button" class="text _edit">{$lang->cmd_edit}</button>
                </span>
                <form action="./" method="post" id="langForm_{$langName}" >
                    <input type="hidden" name="module" value="{$module}" />
                    <input type="hidden" name="act" value="procModuleAdminInsertLang" />
                    <input type="hidden" name="lang_name" value="{$langName}" />
                    <ul>
                        {@
                            /* move current language to the top */
                            $a = array($lang_type=>$lang_supported[$lang_type]);
                            unset($lang_supported[$lang_type]);
                            $lang_supported = array_merge($a, $lang_supported);
                        }
                        <li class="{$key2}" loop="$lang_supported=>$key2,$value2">
                            <label for="{$langName}_{$key2}">{$value2}</label>
                            <textarea rows="1" cols="42" name="{$key2}" id="{$langName}_{$key2}"></textarea>
                        </li>
                    </ul>
                    <div class="btnArea">
                        <button type="submit" name="act" value="procModuleAdminInsertLang">{$lang->cmd_save}</button>
                        <button type="submit" name="act" value="procModuleAdminDeleteLang">{$lang->cmd_delete}</button>
                    </div>
                </form>
            </div>
            <p class="f-right">
                <a href="#addWord" class="xe-ui-button-gray modalAnchor">{$lang->add_word}</a>
            </p>
            <div class="cleared"></div>
            <form action="./" method="get" class="adminSearch">
                <input type="hidden" name="module" value="{$module}" />
                <input type="hidden" name="act" value="{$act}" />
                <input type="hidden" name="search_target" value="value" />
                <input type="hidden" name="error_return_url" value="" />
                <p class="inline-list center">
                    <label>Search for:</label>
                    <input title="search" name="search_keyword" value="{htmlspecialchars($search_keyword)}" class="xe-ui-panel-text" />
                    <a href="#" class="xe-ui-button-gray" onclick="jQuery('.adminSearch').submit();return false;">{$lang->cmd_search}</a>
                </p>
            </form>
        </div>
        <div class="modal" id="addWord">
            <form action="./" method="post" class="form mLangEdit fg" id="langForm_new" >
                <input type="hidden" name="act" value="procModuleAdminInsertLang" />
                <input type="hidden" name="module" value="{$module}" />
                <input type="hidden" name="target" value="{$target}" />
                <h2 class="h2">{$lang->add_word}</h2>
                <ul>
                    <li class="{$key2}" loop="$lang_supported=>$key2,$value2"><label for="{$langName}_{$key2}">{$value2}</label> <textarea rows="1" cols="42" name="{$key2}" id="{$langName}_{$key2}"></textarea></li>
                </ul>
                <p class="center">
                    <a href="#" class="xe-ui-button-gray" onclick="jQuery('#langForm_new').submit();return false;">{$lang->cmd_save}</a>
                </p>
            </form>
        </div>
        <div class="xe-ui-panel-controller">
            <hr />
            <form action="">
                <input type="hidden" name="error_return_url" value="" />
                <input type="hidden" name="module" value="{$module}" />
                <input type="hidden" name="act" value="{$act}" />
                <input cond="$search_keyword" type="hidden" name="search_keyword" value="{$search_keyword}" />
                <input cond="$search_target" type="hidden" name="search_target" value="{$search_target}" />
                <p style="text-align: center;">
                    <a href="{getUrl('page', '')}" class="xe-ui-button-gray pagination first"><img src="{getFullUrl()}common/img/pagination_left.png"/></a>
                    <block cond="$page_navigation->first_page + $page_navigation->page_count > $page_navigation->last_page && $page_navigation->page_count != $page_navigation->total_page">
                        {@$isGoTo = true}
                        <a href="{getUrl('page', '')}" class="xe-ui-button-gray pagination">1</a>
                        <a href="#goTo" class="tgAnchor" title="{$lang->cmd_go_to_page}">...</a>
                    </block>
                    <!--@while($page_no = $page_navigation->getNextPage())-->
                        {@$last_page = $page_no}
                        <a href="#" cond="$page_no == $page" class="xe-ui-button-gray pagination disabled">{$page_no}</a>
                        <a cond="$page_no != $page" href="{getUrl('page', $page_no)}" class="xe-ui-button-gray pagination">{$page_no}</a>
                    <!--@end-->
                    <block cond="$last_page != $page_navigation->last_page">
                        {@$isGoTo = true}
                        <a href="#goTo" class="tgAnchor" title="{$lang->cmd_go_to_page}">...</a>
                        <a href="{getUrl('page', $page_navigation->last_page)}" class="xe-ui-button-gray pagination">{$page_navigation->last_page}</a>
                    </block>
                    <a href="{getUrl('page', $page_navigation->last_page)}" class="xe-ui-button-gray pagination last"><img src="{getFullUrl()}common/img/pagination_right.png"/></a>
                    <span cond="$isGoTo" id="goTo" class="tgContent">
                        <input name="page" title="{$lang->cmd_go_to_page}" />
                        <button type="submit">Go</button>
                    </span>
                </p>
            </form>
        </div>
    </div>
</div>