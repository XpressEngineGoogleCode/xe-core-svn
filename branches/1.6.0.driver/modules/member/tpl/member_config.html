<load target="js/member_admin_config.js" usecdn="true" />
<script type="text/javascript">
    xe.lang.msg_delete_extend_form = '{$lang->msg_delete_extend_form}';
    xe.lang.confirm_delete = '{$lang->confirm_delete}';
    xe.lang.cmd_delete = '{$lang->cmd_delete}';
    xe.lang.msg_null_prohibited_id = '{$lang->msg_null_prohibited_id}';
    /*jQuery( function(){
        jQuery("input:text, textarea").each( function() {
            if ((jQuery(this).attr('title') != '')&&(jQuery(this).attr('title') != undefined)) {
                offset = jQuery(this).next().width() + 20;
                jQuery(this).tipTip({defaultPosition: "right", activation: "focus", maxWidth:"300px", delay:"0", edgeOffset:offset});
            }
        });
    });*/
</script>

<h1>{$lang->cmd_member_config}</h1>
<div class="xe-ui-title-separator">
    <hr/>
</div>

<div id="content" class="cleared">
    <div cond="$XE_VALIDATOR_MESSAGE" class="xe-ui-message {$XE_VALIDATOR_MESSAGE_TYPE} gradient cleared">
        <a href="#" style="float: right;" onclick="jQuery(this).parent().remove();return false;" class="xe-ui-button-gray gradient">Dismiss</a>
        <p>{$XE_VALIDATOR_MESSAGE}</p>
    </div>
    <div class="xe-ui-panel">
        <div class="xe-ui-panel-content cleared">
            <form action="./" class="form" ruleset="insertConfig" method="post" id="in_co">
                <input type="hidden" name="module" value="member" />
                <input type="hidden" name="act" value="procMemberAdminInsertConfig" />
                <input type="hidden" name="success_return_url" value="{getUrl('act', $act)}" />
                <input type="hidden" name="agreement" value="{$config->agreement}" />
                <h2>{$lang->cmd_module_config}</h2>
                <p class="form-list">
                    <span class="desc">{$lang->enable_join}:</span>
                    <input type="radio" name="enable_join" id="enable_join_yes" value="Y" checked="checked"|cond="$config->enable_join == 'Y'" /> <label for="enable_join_yes">{$lang->cmd_yes}</label>
                    <input type="radio" name="enable_join" id="enable_join_no" value="N" checked="checked"|cond="$config->enable_join != 'Y'" /> <label for="enable_join_no">{$lang->cmd_no}</label>
                </p>
                <p class="form-list">
                    <span class="desc">{$lang->enable_confirm}:</span>
                    <input type="radio" name="enable_confirm" id="enable_confirm_yes" value="Y" checked="checked"|cond="$config->enable_confirm == 'Y'" /> <label for="enable_confirm_yes">{$lang->cmd_yes}</label>
                    <input type="radio" name="enable_confirm" id="enable_confirm_no" value="N" checked="checked"|cond="$config->enable_confirm != 'Y'"/> <label for="enable_confirm_no">{$lang->cmd_no}</label>
                </p>
                <p class="form-list">
                    <label for="webmaster_name" class="desc">{$lang->webmaster_name}:</label>
                    <input type="text" id="webmaster_name" name="webmaster_name" value="{$config->webmaster_name}" class="xe-ui-panel-text" title="{$lang->about_webmaster_name}"/>
                </p>
                <p class="form-list">
                    <label for="webmaster_email" class="desc">{$lang->webmaster_email}:</label>
                    <input type="text" id="webmaster_email" name="webmaster_email" value="{$config->webmaster_email}" class="xe-ui-panel-text" />
                </p>
                <p class="form-list">
                    <label for="limit_day" class="desc">{$lang->limit_day}:</label>
                    <input type="text" id="limit_day" name="limit_day" value="{$config->limit_day}" style="width:30px" title="{$lang->about_limit_day}" class="xe-ui-panel-text" /> <span>{$lang->unit_day}</span>
                </p>
                <p class="form-list">
                    <label for="change_password_date" class="desc">{$lang->change_password_date}:</label>
                    <input type="text" id="change_password_date" name="change_password_date" value="{$config->change_password_date}" style="width:30px" class="xe-ui-panel-text" title="{$lang->about_change_password_date}"/> <span>{$lang->unit_day}</span>
                </p>
                <p class="form-list">
                    <label for="agreement" class="desc v-top">{$lang->agreement}:</label>
                    <span style="width: 750px; display: inline-block; ">{$editor}</span>
                </p>
                <p class="form-list">
                    <label for="after_login_url" class="desc">{$lang->after_login_url}:</label>
                    <input type="text" id="after_login_url" name="after_login_url" value="{$config->after_login_url}" class="xe-ui-panel-text" title="{$lang->about_after_login_url}"/>
                </p>
                <p class="form-list">
                    <label for="after_logout_url" class="desc">{$lang->after_logout_url}:</label>
                    <input type="text" id="after_logout_url" name="after_logout_url" value="{$config->after_logout_url}" title="{$lang->about_after_logout_url}" class="xe-ui-panel-text"/>
                </p>
                <p class="form-list">
                    <label for="redirect_url" class="desc">{$lang->redirect_url}:</label>
                    <input type="text" id="redirect_url" name="redirect_url" value="{$config->redirect_url}" class="xe-ui-panel-text" title="{$lang->about_redirect_url}"/>
                </p>
                <p class="form-list">
                    <label for="skin" class="desc">{$lang->skin}:</label>
                    <select id="skin" name="skin" onchange="doGetSkinColorset(this.options[this.selectedIndex].value)" class="xe-ui-panel-select" style="width: 250px;">
                        <option loop="$skin_list=>$key,$val" value="{$key}" selected="selected"|cond="$config->skin==$key">{$val->title} ({$key})</option>
                    </select>
                </p>
                <p id="colorset" class="form-list" style="display:none"|cond="!$config->colorset">
                   <label for="member_colorset" class="desc">{$lang->colorset}:</label>
                    <span id="member_colorset"></span>
                </p>
                <p class="form-list" style="float: left;">
                    <span class="desc">{$lang->cmd_manage_id}:</span>
                </p>
                <p id="deniedList" class="form-list" style="float: right; width: 750px;">
                    <span loop="$deniedIDs=>$denied_info" id="denied_{$denied_info->user_id}">
                        <b>{$denied_info->user_id}</b> <a href="#" class="side" onclick="doUpdateDeniedID('{$denied_info->user_id}','delete','{$lang->confirm_delete}');return false;">({$lang->delete})</a>,
                    </span>
                </p>
                <div class="cleared"></div>
                <p class="form-list" style="float: left;">
                    <label for="prohibited_id" class="desc">Add ID's:</label>
                </p>
                <p class="form-list" style="float: right; width: 750px;">
                    <textarea rows="3" cols="40" id="prohibited_id" title="{$lang->multi_line_input}" class="xe-ui-panel-textarea" style="margin: 0 0 5px 0;"></textarea>
                    <br />
                    <a href="#" class="xe-ui-button-gray _addDeniedID">{$lang->add}</a>
                </p>
                <div class="cleared"></div>

                <h2>{$lang->cmd_manage_form}</h2>
                <table cellpadding="0" cellspacing="0" class="sortable xe-ui-table">
                    <thead>
                        <tr>
                            <th scope="col" class="center">Move</th>
                            <th scope="col" class="aLeft" width="35%">{$lang->target}</th>
                            <th scope="col" class="center">{$lang->identifier}</th>
                            <th scope="col" class="center">{$lang->use}</th>
                            <th scope="col" class="center">{$lang->cmd_required}/{$lang->cmd_optional}</th>
                            <th scope="col" class="center">{$lang->description}</th>
                            <th scope="col" class="center">{$lang->cmd_edit}</th>
                        </tr>
                    </thead>
                    <tbody class="uDrag">
                        {@ $i=0;}
                        <!--@foreach($config->signupForm as $item)-->
                        {@ $i++;}
                        <!--@if($item->isIdentifier)-->
                        <tr class="sticky">
                            <td class="center">
                                <input type="hidden" name="list_order[]" value="{$item->name}" />
                                <input type="hidden" name="usable_list[]" value="{$item->name}"/>
                                <input type="hidden" name="{$item->name}" value="requierd"/>
                            </td>
                            <td class="v-mid" width="35%">{$item->title}</td>
                            <td class="center v-mid">
                                <input id="item_r_{$i}" type="radio" name="identifier" value="{$item->name}" checked="checked" />
                                <label for="item_r_{$i}" style="margin: 0;"></label>
                            </td>
                            <td class="center v-mid">                               
                                <input id="item_c_{$i}" type="checkbox" name="usable_list[]" value="{$item->name}" title="{$lang->use}" checked="checked" disabled="disabled" />
                                <label for="item_c_{$i}" style="margin: 0;"></label>
                            </td>
                            <td class="center">
                                <p>
                                    <input type="radio" id="{$item->name}_re" name="{$item->name}" value="requierd" checked="checked" disabled="disabled" /> <label for="{$item->name}_re">{$lang->cmd_required}</label>
                                    <input type="radio" id="{$item->name}_op" name="{$item->name}" value="option" disabled="disabled" /> <label for="{$item->name}_op">{$lang->cmd_optional}</label>
                                </p>
                            </td>
                            <td class="center"></td>
                            <td class="center"></td>
                        </tr>
                        <!--@elseif($item->isDefaultForm)-->
                        <tr class="_imageType"|cond="$item->imageType">
                            <input type="hidden" name="list_order[]" value="{$item->name}" />
                            <input type="hidden" name="usable_list[]" value="{$item->name}" cond="$item->mustRequired"/>
                            <input type="hidden" name="{$item->name}" value="requierd" cond="$item->mustRequired"/>
                            <td class="center">
                                <a href="#" class="xe-ui-button-gray img dragBtn">
                                    <img src="{getFullURL('')}common/img/icon_move.png" title="Move this item"/>
                                </a>
                            </td>
                            <td class="v-mid" width="35%">
                                <span class="_title">{$item->title}</span>
                            </td>
                            <td class="center v-mid">
                                <input id="item_r_{$i}" type="radio" name="identifier" value="{$item->name}" cond="$item->name== 'email_address' || $item->name=='user_id'" />
                                <label for="item_r_{$i}" style="margin: 0;"></label>
                            </td>
                            <td class="center v-mid">                                
                                <input id="item_c_{$i}" type="checkbox" name="usable_list[]" value="{$item->name}" title="{$lang->use}" checked="checked"|cond="$item->mustRequired || $item->isUse" disabled="disabled"|cond="$item->mustRequired" />
                                <label for="item_c_{$i}" style="margin: 0;"></label>
                            </td>
                            <td class="center">
                                <p>
                                    <input type="radio" id="{$item->name}_re" name="{$item->name}" value="required" checked="checked"|cond="$item->mustRequired || $item->required" disabled="disabled"|cond="$item->mustRequired || !$item->isUse" /> <label for="{$item->name}_re">{$lang->cmd_required}</label>
                                    <input type="radio" id="{$item->name}_op" name="{$item->name}" value="option" checked="checked"|cond="!$item->mustRequired && ($item->isUse && !$item->required)" disabled="disabled"|cond="$item->mustRequired || !$item->isUse" /> <label for="{$item->name}_op">{$lang->cmd_optional}</label>
                                </p>
                                <p cond="$item->imageType" >
                                    <label for="{$item->name}_max_width">{$lang->cmd_image_max_width}: </label>
                                    <input type="text" name="{$item->name}_max_width" id="{$item->name}_max_width" value="{$item->max_width}" style="width:30px" class="xe-ui-panel-text"/> px
                                </p>
                                <p cond="$item->imageType" >
                                    <label for="{$item->name}_max_height">{$lang->cmd_image_max_height}: </label>
                                    <input type="text" name="{$item->name}_max_height" id="{$item->name}_max_height" value="{$item->max_height}" style="width:30px" class="xe-ui-panel-text"/> px
                                </p>
                            </td>
                            <td class="center"></td>
                            <td class="center"></td>
                        </tr>
                        <!--@else-->
                        <tr>
                            <input type="hidden" name="list_order[]" value="{$item->name}" />
                            <input type="hidden" name="{$item->name}_member_join_form_srl" value="{$item->member_join_form_srl}" />
                            <td class="center">
                                <a href="#" class="xe-ui-button-gray img dragBtn">
                                    <img src="{getFullURL('')}common/img/icon_move.png" title="Move this item"/>
                                </a>
                            </td>
                            <td width="35%">
                                {$item->title}
                            </td>
                            <td class="center"></td>
                            <td class="center">
                                <input id="item_c_{$i}" type="checkbox" name="usable_list[]" value="{$item->name}" title="{$lang->use}" checked="checked"|cond="$item->isUse" />
                                <label for="item_c_{$i}" style="margin: 0;"></label>
                            </td>
                            <td class="center">
                                <p>
                                    <input type="radio" id="{$item->name}_re" name="{$item->name}" value="required" checked="checked"|cond="$item->required" disabled="disabled"|cond="!$item->isUse"/> <label for="{$item->name}_re">{$lang->cmd_required}</label>
                                    <input type="radio" id="{$item->name}_op" name="{$item->name}" value="option" checked="checked"|cond="$item->isUse && !$item->required" disabled="disabled"|cond="!$item->isUse" /> <label for="{$item->name}_op">{$lang->cmd_optional}</label>
                                </p>
                            </td>
                            <td class="center">{$item->description}</td>
                            <td id="{$item->member_join_form_srl}" class="center">
                                <a href="#userDefine" class="modalAnchor _extendFormEdit">{$lang->cmd_edit}</a> | <a href="#" class="_extendFormDelete">{$lang->cmd_delete}</a>
                            </td>
                        </tr>
                        <!--@end-->
                    <!--@end-->
                    </tbody>
                </table>
            <p class="center">
                <a href="#userDefine" class="modalAnchor _extendFormEdit xe-ui-button-gray">{$lang->add_extend_form}</a>
            </p>
        </form>
    </div>
    <div class="modal" id="userDefine">
        <form action="./" class="fg form" ruleset="insertJoinForm" method="post">
            <input type="hidden" name="module" value="member" />
            <input type="hidden" name="act" value="procMemberAdminInsertJoinForm" />
            <input type="hidden" name="success_return_url" value="{getUrl('act', $act)}" />
            <div id="extendForm">
            </div>
        </form>
    </div>
    <div class="xe-ui-panel-controller">
        <hr />
        <p class="center">
            <a href="#" onclick="jQuery('#in_co').submit(); return false;" class="xe-ui-button-gray">{$lang->cmd_save}</a>
        </p>
    </div>
</div>
</div>