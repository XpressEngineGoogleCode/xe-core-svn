#summary Reference for the file module
#sidebar ReferenceTOC

<wiki:toc max_depth="2" />

= Introduction =
파일을 저장, 삭제, 이동하거나 파일의 목록을 출력하는 등 파일 관리 기능을 제공하는 모듈이다.

= Model =
== getFileList( ) ==
특정 문서에 속한 파일의 목록을 반환한다. 

== getFilesCount( ) ==
특정 문서에 속한 파일의 갯수를 반환한다.

= View =

= Controller =

== deleteFile($file_srl) ==
$file_srl과 식별 번호가 같은 파일의 정보를 데이터베이스에서 삭제하고 디스크에 저장된 파일을 제거한다.
반환되는 값은 제거한 파일의 정보를 포함하는 DB Result 객체이다.

* 인수 *
  * *$file_srl* : 제거할 파일의 식별 번호
  
{{{
$fileController = &getController('file');
$fileController->deleteFile(123); // 식별 번호가 123인 파일을 제거
}}}

== deleteFiles($upload_target_srl) ==
$upload_target_srl과 식별 번호가 같은 문서에 속한 파일을 모두 지운다. 데이터베이스에서 해당하는 모든 파일의 정보를 삭제하고, 디스크에 저장된 파일을 제거한다.

* 인수 *
  * *$upload_target_srl* : 제거할 파일을 포함한 문서의 식별 번호

== insertFile($file_info, $module_srl, $upload_target_srl, $download_count=0, $manual_insert=false) ==
파일을 디스크에 저장하고 파일의 정보를 데이터베이스에 삽입한다.

* 인수 *
  * *$file_info* : 저장할 파일 정보
  * *$module_srl* : 모듈의 식별 번호
  * *$upload_target_srl* : 파일을 포함한 문서의 식별 번호
  * *$download_count* : 파일의 초기 다운로드 횟수
  * *$manual_insert* : ...
  
== moveFile($file_srl, $new_module_srl, $new_upload_target_srl) ==
디스크에서 파일을 이동시키고 파일의 정보를 수정하여 파일이 소속된 모듈과 문서를 바꾼다.

* 인수 *
  * *$file_srl* : 대상 파일의 식별 번호
  * *$new_module_srl* : 새로운 모듈 식별 번호
  * *$new_upload_target_srl* : 새로운 문서 식별 번호
